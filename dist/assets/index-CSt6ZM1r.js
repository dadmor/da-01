var _t=Object.defineProperty;var St=(s,t,a)=>t in s?_t(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var as=(s,t,a)=>St(s,typeof t!="symbol"?t+"":t,a);import{j as e,R as ta,I as ra,F as ia,S as Fs,a as na,P as Ct,C as la,b as oa,V as Pt,c as Dt,d as ca,e as Et,T as da,f as Lt,g as ma,h as xa,i as Mt,k as ua,l as Rt,L as ha,m as pa,n as At,o as It,p as ja,q as Ft,r as Tt,s as fa,t as ga,u as wa,v as ya,w as Ot,x as xs,y as Wt,z as Na,A as va,B as ba,D as $t,E as qt,G as Bt,H as za,J as ka,O as Ut,K as Zt,W as Ht,M as Vt,N as Gt,Q as Kt,U as Jt,X as _a,Y as Yt,Z as Qt,_ as Sa,$ as Ca,a0 as Xt}from"./radix-ui-Dw4D6cH3.js";import{l as er,a as x,n as sr,R as W,e as pe,o as J,u as Pa,p as ar,L as Ge,B as tr,q as rr,N as Ns,O as ir}from"./react-vendor-SRHEfJrM.js";import{n as je,M as nr,d as lr,e as or,f as ye,I as us,i as Da,j as cr,H as dr,k as mr,l as xr,m as ur,o as hr,D as pr,p as jr,E as Gs,t as fr,_ as gr,u as wr}from"./refine-core-CRIRaI-g.js";import{c as yr,C as hs,b as Nr,I as vr}from"./refine-ui-BNl3RRqd.js";import{t as br,c as zr,U as we,a as ps,C as Ea,b as kr,d as ls,M as La,X as Ts,L as _r,e as Ma,f as de,g as De,T as Ra,G as Ie,P as os,S as Aa,h as qe,i as Be,R as Os,A as Fe,j as Qe,E as Ds,k as Ks,l as Es,m as cs,n as ce,o as Ee,H as vs,p as he,q as Ke,r as Se,s as Ls,u as ds,v as Ws,F as Ia,w as We,x as ge,D as Sr,y as Fa,z as $s,B as Ta,I as Oa,J as ms,K as Re,N as Ms,O as Wa,Q as Cr,V as Te,W as Js,Y as bs,Z as Pr,_ as Dr,$ as Er,a0 as Ce,a1 as qs,a2 as $a,a3 as Lr,a4 as Mr,a5 as Rr,a6 as Ue,a7 as Ye,a8 as Ar,a9 as Ir,aa as Fr,ab as Tr,ac as Ys,ad as Qs,ae as Or}from"./ui-utils-CznIf7v-.js";import{c as Wr,t as K}from"./utils-BAntW6VY.js";import{b as zs,i as $r,a as He,c as Ve,d as qr,f as te,s as ks,e as _s,g as ts,h as Xs,j as Ss}from"./date-BN4qkPep.js";import{R as Br,B as Ur,C as Zr,X as Hr,Y as Vr,T as Gr,a as Kr}from"./tables-6njhp9LF.js";import"./forms-C0YMKGHR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();var rs={},ea;function Jr(){if(ea)return rs;ea=1;var s=er();return rs.createRoot=s.createRoot,rs.hydrateRoot=s.hydrateRoot,rs}var Yr=Jr();const Qr="https://xnvmllbnskoigoineyni.supabase.co",Xr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhudm1sbGJuc2tvaWdvaW5leW5pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyMDc0NTcsImV4cCI6MjA2ODc4MzQ1N30.98-aRoqw4hnlkb2NPCp8-qZzSCPCZycocMa0c5LCc14",I=yr(Qr,Xr,{db:{schema:"public"},auth:{persistSession:!0}}),C=(...s)=>br(zr(s));class Je extends Error{constructor(a,r,i,n){super(a);as(this,"code");as(this,"statusCode");as(this,"details");this.name="AuthError",this.code=r,this.statusCode=i||400,this.details=n}}const Oe={user_already_exists:"Konto z tym adresem email już istnieje.",password_too_short:"Hasło musi mieć co najmniej 6 znaków.",password_too_long:"Hasło nie może być dłuższe niż 72 znaki.",invalid_email:"Nieprawidłowy format adresu email.",over_email_send_rate_limit:"Za szybko! Poczekaj 2 sekundy przed ponowną próbą.",registration_failed:"Rejestracja nie powiodła się.",invalid_credentials:"Nieprawidłowy email lub hasło.",email_not_confirmed:"Potwierdź swój adres email przed zalogowaniem.",user_not_found:"Nie znaleziono użytkownika.",reset_password_rate_limit:"Zbyt wiele prób. Spróbuj ponownie za chwilę.",invalid_recovery_token:"Link do resetowania hasła wygasł lub jest nieprawidłowy.",update_failed:"Aktualizacja nie powiodła się.",session_expired:"Sesja wygasła. Zaloguj się ponownie.",oauth_error:"Błąd podczas logowania przez zewnętrznego dostawcę.",oauth_cancelled:"Logowanie zostało anulowane.",unknown_error:"Wystąpił nieoczekiwany błąd. Spróbuj ponownie.",network_error:"Błąd połączenia. Sprawdź swoje połączenie internetowe."},ae=s=>{if(!s)return new Je(Oe.unknown_error,"unknown_error");if(s instanceof Je)return s;const t=s.message||s.error_description||"",a=s.code||s.error||"";let r="unknown_error",i=Oe.unknown_error,n=400;if(a)switch(a){case"user_already_exists":case"user_already_registered":r="user_already_exists",n=409;break;case"weak_password":r="password_too_short",n=422;break;case"invalid_email":r="invalid_email",n=422;break;case"over_email_send_rate_limit":r="over_email_send_rate_limit",n=429;break;case"invalid_credentials":r="invalid_credentials",n=401;break;case"email_not_confirmed":r="email_not_confirmed",n=403;break;case"session_not_found":r="session_expired",n=401;break}return r==="unknown_error"&&(t.includes("User already registered")||t.includes("already exists")?(r="user_already_exists",n=409):t.includes("Password should be at least")?(r="password_too_short",n=422):t.includes("Password cannot be longer than 72")?(r="password_too_long",n=422):t.includes("Invalid email")?(r="invalid_email",n=422):t.includes("over_email_send_rate_limit")?(r="over_email_send_rate_limit",n=429):t.includes("Invalid login credentials")?(r="invalid_credentials",n=401):t.includes("Email not confirmed")?(r="email_not_confirmed",n=403):t.includes("Network request failed")&&(r="network_error",n=503)),i=Oe[r]||t||Oe.unknown_error,new Je(i,r,n,{originalError:t,originalCode:a})},sa=s=>Oe[s]||Oe.unknown_error,Rs={login:async({email:s,password:t,providerName:a})=>{try{if(a){const{data:o,error:h}=await I.auth.signInWithOAuth({provider:a});return h?{success:!1,error:ae(h)}:{success:!0,redirectTo:o?.url}}const{data:r,error:i}=await I.auth.signInWithPassword({email:s,password:t});if(i)return{success:!1,error:ae(i)};const{data:n}=await I.from("users").select("*").eq("id",r.user.id).single();return{success:!0,redirectTo:`/${n?.role}`||"/"}}catch(r){return{success:!1,error:ae(r)}}},register:async({email:s,password:t,role:a,operator_id:r})=>{try{const{data:i,error:n}=await I.auth.signUp({email:s,password:t,options:{data:{role:a,...r&&{operator_id:r}}}});return n?{success:!1,error:ae(n)}:i?.user?i.user.identities&&i.user.identities.length>0?{success:!0,user:i.user,session:i.session}:{success:!1,error:new Je(sa("user_already_exists"),"user_already_exists",409)}:{success:!1,error:new Je(sa("registration_failed"),"registration_failed",400)}}catch(i){return{success:!1,error:ae(i)}}},forgotPassword:async({email:s})=>{try{const{error:t}=await I.auth.resetPasswordForEmail(s,{redirectTo:`${window.location.origin}/update-password`});return t?{success:!1,error:ae(t)}:{success:!0}}catch(t){return{success:!1,error:ae(t)}}},updatePassword:async({password:s})=>{try{const{error:t}=await I.auth.updateUser({password:s});return t?{success:!1,error:ae(t)}:{success:!0,redirectTo:"/"}}catch(t){return{success:!1,error:ae(t)}}},logout:async()=>{try{const{error:s}=await I.auth.signOut();return s?{success:!1,error:ae(s)}:{success:!0,redirectTo:"/login"}}catch(s){return{success:!1,error:ae(s)}}},onError:async s=>({error:ae(s)}),check:async()=>{try{const{data:s}=await I.auth.getSession();return{authenticated:!!s.session}}catch(s){return{authenticated:!1,error:ae(s)}}},getPermissions:async()=>{try{const{data:s,error:t}=await I.auth.getUser();if(t||!s?.user)return console.error("Error getting auth user:",ae(t)),null;const{data:a,error:r}=await I.from("users").select("role").eq("id",s.user.id).single();return r?(console.error("Error getting user role:",ae(r)),null):a?.role||null}catch(s){return console.error("Error in getPermissions:",ae(s)),null}},getIdentity:async()=>{try{const{data:s,error:t}=await I.auth.getUser();if(t||!s?.user)return console.error("Error getting auth user:",ae(t)),null;const{data:a,error:r}=await I.from("users").select("*").eq("id",s.user.id).single();return r?(console.error("Error getting user data:",ae(r)),null):{...a,_timestamp:Date.now()}}catch(s){return console.error("Error in getIdentity:",ae(s)),null}}},Ze=({isLoading:s,isError:t,loadingText:a="Loading...",errorMsg:r="Error loading data"})=>s?e.jsx("div",{className:"p-6 text-gray-600 animate-reverse-pulse",children:a}):t?e.jsx("div",{className:"p-6 text-red-500",children:r}):null;function ei(s,t){let a;try{a=s()}catch{return}return{getItem:i=>{var n;const o=u=>u===null?null:JSON.parse(u,void 0),h=(n=a.getItem(i))!=null?n:null;return h instanceof Promise?h.then(o):o(h)},setItem:(i,n)=>a.setItem(i,JSON.stringify(n,void 0)),removeItem:i=>a.removeItem(i)}}const As=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(r){return As(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return As(r)(a)}}}},si=(s,t)=>(a,r,i)=>{let n={storage:ei(()=>localStorage),partialize:b=>b,version:0,merge:(b,_)=>({..._,...b}),...t},o=!1;const h=new Set,u=new Set;let c=n.storage;if(!c)return s((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...b)},r,i);const y=()=>{const b=n.partialize({...r()});return c.setItem(n.name,{state:b,version:n.version})},f=i.setState;i.setState=(b,_)=>{f(b,_),y()};const w=s((...b)=>{a(...b),y()},r,i);i.getInitialState=()=>w;let m;const l=()=>{var b,_;if(!c)return;o=!1,h.forEach(k=>{var p;return k((p=r())!=null?p:w)});const j=((_=n.onRehydrateStorage)==null?void 0:_.call(n,(b=r())!=null?b:w))||void 0;return As(c.getItem.bind(c))(n.name).then(k=>{if(k)if(typeof k.version=="number"&&k.version!==n.version){if(n.migrate){const p=n.migrate(k.state,k.version);return p instanceof Promise?p.then(d=>[!0,d]):[!0,p]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,k.state];return[!1,void 0]}).then(k=>{var p;const[d,E]=k;if(m=n.merge(E,(p=r())!=null?p:w),a(m,!0),d)return y()}).then(()=>{j?.(m,void 0),m=r(),o=!0,u.forEach(k=>k(m))}).catch(k=>{j?.(void 0,k)})};return i.persist={setOptions:b=>{n={...n,...b},b.storage&&(c=b.storage)},clearStorage:()=>{c?.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>l(),hasHydrated:()=>o,onHydrate:b=>(h.add(b),()=>{h.delete(b)}),onFinishHydration:b=>(u.add(b),()=>{u.delete(b)})},n.skipHydration||l(),m||w},ai=si;class ti{static async call(t,a,r={}){const n={message:this.interpolateTemplate(a.user,r),...a.system&&{system:a.system},...t.model&&{model:t.model}},o=await fetch(t.endpoint,{method:"POST",headers:{"Content-Type":"application/json",...t.apiKey&&{Authorization:`Bearer ${t.apiKey}`}},body:JSON.stringify(n)});if(!o.ok)throw new Error(`LLM API Error: ${o.status} ${o.statusText}`);const h=await o.json();let u=h.response||h.data||h.text||"";return a.responseFormat==="json"?(u=this.cleanJsonResponse(u),JSON.parse(u)):u}static interpolateTemplate(t,a){return t.replace(/\{\{(\w+)\}\}/g,(r,i)=>a[i]!==void 0?String(a[i]):r)}static cleanJsonResponse(t){return t.replace(/```(?:json)?\s*([\s\S]*?)\s*```/,"$1").trim()}}const Xe=Wr()(ai((s,t)=>({processes:{},formData:{},llmOperations:{},registeredLLMOperations:{},register:a=>s(r=>({processes:{...r.processes,[a.id]:a}})),unregister:(a,r="all")=>s(i=>{switch(r){case"all":{const{[a]:n,...o}=i.processes,{[a]:h,...u}=i.formData,c=Object.keys(i.llmOperations).filter(f=>!f.startsWith(`${a}-`)).reduce((f,w)=>(f[w]=i.llmOperations[w],f),{}),y=Object.keys(i.registeredLLMOperations).filter(f=>!f.startsWith(`${a}-`)).reduce((f,w)=>(f[w]=i.registeredLLMOperations[w],f),{});return{processes:o,formData:u,llmOperations:c,registeredLLMOperations:y}}case"data":{const{[a]:n,...o}=i.formData;return{...i,formData:o}}default:return i}}),get:a=>t().processes[a]||null,getSchemaFragment:a=>{const[r,...i]=a.split("."),n=t().processes[r];if(!n)return null;let o=n.schema;for(const h of i)o=o?.[h];return o},setData:(a,r)=>s(i=>({formData:{...i.formData,[a]:{...i.formData[a],...r}}})),getData:a=>t().formData[a]||{},reset:a=>s(r=>({formData:{...r.formData,[a]:{}}})),registerLLMOperation:(a,r)=>s(i=>({registeredLLMOperations:{...i.registeredLLMOperations,[`${a}-${r.id}`]:r}})),unregisterLLMOperation:(a,r)=>s(i=>{const{[`${a}-${r}`]:n,...o}=i.registeredLLMOperations;return{registeredLLMOperations:o}}),executeLLMOperation:async(a,r,i={})=>{const n=`${a}-${r}`,o=t().registeredLLMOperations[n];if(!o)throw new Error(`LLM Operation not found: ${n}`);try{t().setLLMOperationState(a,r,{loading:!0,error:null});const h=t().getData(a),u={...h,...i},c=o.inputMapping?o.inputMapping(u):u,y=await ti.call(o.config,o.prompt,c);if(o.validation&&!o.validation(y))throw new Error("LLM result failed validation");let f=y;return o.outputMapping&&(f=o.outputMapping(y,h),t().setData(a,f)),t().setLLMOperationState(a,r,{loading:!1,error:null,result:y}),y}catch(h){throw t().setLLMOperationState(a,r,{loading:!1,error:h.message||"Unknown error",result:null}),h}},setLLMOperationState:(a,r,i)=>s(n=>({llmOperations:{...n.llmOperations,[`${a}-${r}`]:i}})),getLLMOperationState:(a,r)=>t().llmOperations[`${a}-${r}`]||{loading:!1,error:null},clearLLMOperation:(a,r)=>s(i=>{const{[`${a}-${r}`]:n,...o}=i.llmOperations;return{llmOperations:o}})}),{name:"form-schema-store",version:2,partialize:s=>({processes:s.processes,formData:s.formData})})),Ne=x.forwardRef(({className:s,...t},a)=>e.jsx(ta,{ref:a,className:C("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ne.displayName=ta.displayName;const Le=x.forwardRef(({className:s,...t},a)=>e.jsx(ra,{ref:a,className:C("aspect-square h-full w-full object-cover",s),...t}));Le.displayName=ra.displayName;const ve=x.forwardRef(({className:s,...t},a)=>e.jsx(ia,{ref:a,className:C("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));ve.displayName=ia.displayName;function Cs({className:s,...t}){return e.jsx("div",{className:C("animate-pulse rounded-md bg-primary/10",s),...t})}const ri=({className:s})=>{const{data:t,isLoading:a,error:r}=je();if(a)return e.jsxs("div",{className:`flex items-center space-x-3 p-3 ${s}`,children:[e.jsx(Cs,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Cs,{className:"h-4 w-24"}),e.jsx(Cs,{className:"h-3 w-16"})]})]});if(r)return e.jsxs("div",{className:`flex items-center space-x-3 p-3 text-destructive ${s}`,children:[e.jsx(we,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Błąd danych"}),e.jsx("div",{className:"text-xs opacity-70",children:"Nie można pobrać profilu"})]})]});if(!t)return e.jsxs("div",{className:`flex items-center space-x-3 p-3 text-muted-foreground ${s}`,children:[e.jsx(we,{className:"h-6 w-6"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Brak danych"}),e.jsx("div",{className:"text-xs opacity-70",children:"Użytkownik nieznany"})]})]});const i=(u,c)=>u?u.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):c?c.slice(0,2).toUpperCase():"U",n=t.name||t.email||"Użytkownik",o=i(t.name,t.email),h=t.user_metadata?.role;return e.jsxs("div",{className:`flex items-center space-x-3 p-3 ${s}`,children:[e.jsxs(Ne,{className:"h-10 w-10",children:[e.jsx(Le,{src:t.avatar,alt:n}),e.jsx(ve,{className:"bg-primary text-primary-foreground",children:o})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("div",{className:"font-medium text-sm truncate",title:n,children:n}),t.email&&e.jsx("div",{className:"text-xs text-muted-foreground truncate",title:t.email,children:t.email}),h&&e.jsxs("div",{className:"text-xs text-muted-foreground truncate",title:h,children:["Rola: ",h]})]})]})},ii=ps("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ee=x.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:C(ii({variant:t}),s),...a}));ee.displayName="Alert";const ni=x.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:C("mb-1 font-medium leading-none tracking-tight",s),...t}));ni.displayName="AlertTitle";const se=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-sm [&_p]:leading-relaxed",s),...t}));se.displayName="AlertDescription";const li=ps("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function L({className:s,variant:t,asChild:a=!1,...r}){const i=a?Fs:"span";return e.jsx(i,{"data-slot":"badge",className:C(li({variant:t}),s),...r})}const oi=x.forwardRef(({...s},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...s}));oi.displayName="Breadcrumb";const ci=x.forwardRef(({className:s,...t},a)=>e.jsx("ol",{ref:a,className:C("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...t}));ci.displayName="BreadcrumbList";const di=x.forwardRef(({className:s,...t},a)=>e.jsx("li",{ref:a,className:C("inline-flex items-center gap-1.5",s),...t}));di.displayName="BreadcrumbItem";const mi=x.forwardRef(({asChild:s,className:t,...a},r)=>{const i=s?Fs:"a";return e.jsx(i,{ref:r,className:C("transition-colors hover:text-foreground",t),...a})});mi.displayName="BreadcrumbLink";const xi=x.forwardRef(({className:s,...t},a)=>e.jsx("span",{ref:a,role:"link","aria-disabled":"true","aria-current":"page",className:C("font-normal text-foreground",s),...t}));xi.displayName="BreadcrumbPage";const Bs=ps("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),z=x.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...i},n)=>{const o=r?Fs:"button";return e.jsx(o,{className:C(Bs({variant:t,size:a,className:s})),ref:n,...i})});z.displayName="Button";const S=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("rounded-xl border bg-card text-card-foreground shadow flex flex-col overflow-hidden",s),...t}));S.displayName="Card";const F=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex flex-col space-y-1.5 p-6 pb-3 bg-violet-50/50",s),...t}));F.displayName="CardHeader";const O=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-lg font-semibold leading-tight tracking-tight pt-3",s),...t}));O.displayName="CardTitle";const Pe=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("text-sm text-muted-foreground",s),...t}));Pe.displayName="CardDescription";const M=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("p-6 pt-3 space-y-3 flex-1 bg-background",s),...t}));M.displayName="CardContent";const ui=x.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:C("flex items-center justify-between p-6 pt-0",s),...t}));ui.displayName="CardFooter";const hi=ps("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=x.forwardRef(({className:s,...t},a)=>e.jsx(na,{ref:a,className:C(hi(),s),...t}));R.displayName=na.displayName;x.createContext({});x.createContext({});const T=x.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:C("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...a}));T.displayName="Input";const pi=x.forwardRef(({className:s,align:t="center",sideOffset:a=4,...r},i)=>e.jsx(Ct,{children:e.jsx(la,{ref:i,align:t,sideOffset:a,className:C("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...r})}));pi.displayName=la.displayName;const qa=x.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(oa,{ref:r,className:C("relative overflow-hidden",s),...a,children:[e.jsx(Pt,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Ba,{}),e.jsx(Dt,{})]}));qa.displayName=oa.displayName;const Ba=x.forwardRef(({className:s,orientation:t="vertical",...a},r)=>e.jsx(ca,{ref:r,orientation:t,className:C("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...a,children:e.jsx(Et,{className:"relative flex-1 rounded-full bg-border"})}));Ba.displayName=ca.displayName;const ne=Ft,le=Tt,re=x.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(da,{ref:r,className:C("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(Lt,{asChild:!0,children:e.jsx(Ea,{className:"h-4 w-4 opacity-50"})})]}));re.displayName=da.displayName;const Ua=x.forwardRef(({className:s,...t},a)=>e.jsx(ma,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(kr,{className:"h-4 w-4"})}));Ua.displayName=ma.displayName;const Za=x.forwardRef(({className:s,...t},a)=>e.jsx(xa,{ref:a,className:C("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Ea,{className:"h-4 w-4"})}));Za.displayName=xa.displayName;const ie=x.forwardRef(({className:s,children:t,position:a="popper",...r},i)=>e.jsx(Mt,{children:e.jsxs(ua,{ref:i,className:C("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(Ua,{}),e.jsx(Rt,{className:C("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Za,{})]})}));ie.displayName=ua.displayName;const ji=x.forwardRef(({className:s,...t},a)=>e.jsx(ha,{ref:a,className:C("px-2 py-1.5 text-sm font-semibold",s),...t}));ji.displayName=ha.displayName;const P=x.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(pa,{ref:r,className:C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(At,{children:e.jsx(ls,{className:"h-4 w-4"})})}),e.jsx(It,{children:t})]}));P.displayName=pa.displayName;const fi=x.forwardRef(({className:s,...t},a)=>e.jsx(ja,{ref:a,className:C("-mx-1 my-1 h-px bg-muted",s),...t}));fi.displayName=ja.displayName;const me=x.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...r},i)=>e.jsx(fa,{ref:i,decorative:a,orientation:t,className:C("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));me.displayName=fa.displayName;const es=x.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:C("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...t}));es.displayName="Textarea";const gi=Ot,Ha=x.forwardRef(({className:s,...t},a)=>e.jsx(ga,{ref:a,className:C("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));Ha.displayName=ga.displayName;const is=x.forwardRef(({className:s,...t},a)=>e.jsx(wa,{ref:a,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));is.displayName=wa.displayName;const ns=x.forwardRef(({className:s,...t},a)=>e.jsx(ya,{ref:a,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ns.displayName=ya.displayName;var js="Switch",[wi,bl]=Na(js),[yi,Ni]=wi(js),Va=x.forwardRef((s,t)=>{const{__scopeSwitch:a,name:r,checked:i,defaultChecked:n,required:o,disabled:h,value:u="on",onCheckedChange:c,form:y,...f}=s,[w,m]=x.useState(null),l=xs(t,p=>m(p)),b=x.useRef(!1),_=w?y||!!w.closest("form"):!0,[j,k]=Wt({prop:i,defaultProp:n??!1,onChange:c,caller:js});return e.jsxs(yi,{scope:a,checked:j,disabled:h,children:[e.jsx(va.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":Ya(j),"data-disabled":h?"":void 0,disabled:h,value:u,...f,ref:l,onClick:ba(s.onClick,p=>{k(d=>!d),_&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})}),_&&e.jsx(Ja,{control:w,bubbles:!b.current,name:r,value:u,checked:j,required:o,disabled:h,form:y,style:{transform:"translateX(-100%)"}})]})});Va.displayName=js;var Ga="SwitchThumb",Ka=x.forwardRef((s,t)=>{const{__scopeSwitch:a,...r}=s,i=Ni(Ga,a);return e.jsx(va.span,{"data-state":Ya(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Ka.displayName=Ga;var vi="SwitchBubbleInput",Ja=x.forwardRef(({__scopeSwitch:s,control:t,checked:a,bubbles:r=!0,...i},n)=>{const o=x.useRef(null),h=xs(o,n),u=$t(a),c=qt(t);return x.useEffect(()=>{const y=o.current;if(!y)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==a&&m){const l=new Event("click",{bubbles:r});m.call(y,a),y.dispatchEvent(l)}},[u,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:h,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ja.displayName=vi;function Ya(s){return s?"checked":"unchecked"}var Qa=Va,bi=Ka;const _e=x.forwardRef(({className:s,...t},a)=>e.jsx(Qa,{className:C("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(bi,{className:C("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));_e.displayName=Qa.displayName;const zi=x.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Bt,{children:e.jsx(za,{ref:r,sideOffset:t,className:C("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...a})}));zi.displayName=za.displayName;const ki=({onClose:s})=>{const{mutate:t}=nr(),{menuItems:a}=lr(),{data:r}=je(),i=()=>{s&&s()},n=r?.role,o=a.filter(h=>h.meta?.roles?h.meta.roles.includes(n):!0);return e.jsxs("div",{className:"flex h-full w-64 flex-col border-r bg-background",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between border-b px-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(La,{className:"h-6 w-6 mr-2"}),e.jsx("span",{className:"font-semibold",children:"Private Dancer"})]}),s&&e.jsx(z,{variant:"ghost",size:"sm",onClick:s,className:"lg:hidden",children:e.jsx(Ts,{className:"h-4 w-4"})})]}),e.jsx(qa,{className:"flex-1 px-3 py-4",children:e.jsx("nav",{className:"space-y-2",children:o.map(h=>e.jsxs(sr,{to:h.route??"/",onClick:i,className:({isActive:u})=>C("flex items-center rounded-md px-3 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground",u?"bg-accent text-accent-foreground":"text-muted-foreground"),children:[h.icon&&e.jsx("span",{className:"mr-3 flex items-center",children:(W.isValidElement(h.icon),h.icon)}),h.label]},h.key))})}),e.jsx(me,{}),e.jsx(ri,{className:"border-b"}),e.jsx("div",{className:"p-4",children:e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{t(),s&&s()},className:"w-full justify-start",children:[e.jsx(_r,{className:"mr-2 h-4 w-4"}),"Logout"]})})]})},X=({children:s})=>e.jsx("div",{className:"p-12 space-y-6 max-w-7xl mx-auto",children:s}),_i=({children:s})=>{const[t,a]=x.useState(!1),r=()=>{a(!t)};return e.jsx("div",{className:"min-h-screen bg-background relative overflow-x-hidden",children:e.jsxs("div",{className:"flex relative",children:[t&&e.jsx("div",{className:"fixed inset-0 z-40 bg-purple-900/20 backdrop-blur-sm lg:hidden",onClick:()=>a(!1)}),e.jsx("aside",{className:`
            h-screen w-64 transform transition-transform duration-300 ease-in-out
            fixed left-0 top-0 z-50
            ${t?"translate-x-0":"-translate-x-full"}
            lg:translate-x-0
            bg-background/95 backdrop-blur-md border-r border-purple-200/20
          `,children:e.jsx(ki,{onClose:()=>a(!1)})}),e.jsxs("main",{className:"flex-1 lg:ml-64 min-w-0 relative z-10",children:[e.jsxs("div",{className:"sticky top-0 z-30 flex h-16 items-center border-b border-purple-200/20 bg-background/80 backdrop-blur-md px-4 lg:hidden",children:[e.jsx(z,{variant:"ghost",size:"sm",onClick:r,className:"mr-2 hover:bg-purple-100/20 hover:text-purple-700",children:e.jsx(La,{className:"h-6 w-6"})}),e.jsx("span",{className:"font-semibold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Private Dancer"})]}),s]})]})})},Si={"between-center":"flex justify-between items-center gap-2",center:"flex justify-center items-center gap-2",start:"flex justify-start items-center gap-2",end:"flex justify-end items-center gap-2"},Q=({children:s,variant:t="between-center",className:a=""})=>{const r=Si[t],i=a?`${r} ${a}`:r;return e.jsx("div",{className:i,children:s})},Ci={"1-2-3":"grid gap-6 md:grid-cols-2 lg:grid-cols-3","1-2-2":"grid gap-6 md:grid-cols-2","1-1-1":"grid gap-6"},oe=({children:s,variant:t="1-2-3",className:a=""})=>{const r=Ci[t],i=a?`${r} ${a}`:r;return e.jsx("div",{className:i,children:s})},Pi={card:{wrap:"space-y-0",title:"font-medium",description:"text-muted-foreground"},lg:{wrap:"space-y-0",title:"text-3xl font-bold tracking-tight",description:"text-muted-foreground"},md:{wrap:"space-y-0",title:"font-medium",description:"text-muted-foreground"},sm:{wrap:"space-y-1",title:"font-medium text-sm text-muted-foreground mb-1",description:"text-sm"}},xe=({title:s,description:t,variant:a="lg"})=>{const r=Pi[a],i=()=>{switch(a){case"lg":return e.jsx("h1",{className:r.title,children:s});case"md":return e.jsx("h2",{className:r.title,children:s});case"sm":return e.jsx("h3",{className:r.title,children:s});default:return e.jsx("h1",{className:r.title,children:s})}};return a==="card"?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"text-lg font-semibold leading-tight flex items-center gap-2",children:s}),e.jsx(Pe,{className:"text-sm text-muted-foreground mt-2",children:t})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:r.wrap,children:[i(),e.jsx("p",{className:`prose ${r.description}`,children:t})]})})},fs=({children:s,onSubmit:t,className:a="",...r})=>{const i="space-y-6",n=a?`${i} ${a}`:i;return e.jsx("form",{onSubmit:t,className:n,...r,children:s})},Y=({children:s,label:t,htmlFor:a,error:r,required:i=!1,className:n=""})=>{const o="space-y-2",h=n?`${o} ${n}`:o,u=()=>t?typeof t=="string"?e.jsxs(R,{htmlFor:a,children:[t,i&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}):e.jsxs(R,{htmlFor:a,className:"flex items-center",children:[t,i&&e.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}):null,c=x.isValidElement(s)?x.cloneElement(s,{className:`${s.props.className||""} ${r?"border-red-500 ring-1 ring-red-500":""}`.trim()}):s;return e.jsxs("div",{className:h,children:[u(),c,r&&e.jsx("p",{className:"text-sm text-red-500",children:r})]})},gs=({children:s,className:t=""})=>{const a="flex justify-end items-center gap-4 pt-6 border-t",r=t?`${a} ${t}`:a;return e.jsx("div",{className:r,children:s})},Di=()=>{const{data:s,isLoading:t}=je(),a=pe(),[r,i]=x.useState(null),[n,o]=x.useState([]),[h,u]=x.useState([]),[c,y]=x.useState(!1),[f,w]=x.useState(null),[m,l]=x.useState(!1),[b,_]=x.useState(null),[j,k]=x.useState(!1),p=x.useRef(null),{mutate:d}=or(),{register:E,handleSubmit:H,setValue:G,watch:V,reset:N,formState:{errors:D,isSubmitting:$}}=hs();x.useEffect(()=>{s?.id&&(y(!0),w(null),I.from("users").select("*").eq("id",s.id).single().then(({data:v,error:q})=>{q?(console.error("Error fetching user:",q),w("Nie udało się pobrać danych użytkownika")):v&&(i(v),N(v),v.profile_photo_url&&_(v.profile_photo_url))}),I.from("user_dance_styles").select(`
          *,
          dance_style:dance_styles(*)
        `).eq("user_id",s.id).order("created_at",{ascending:!1}).then(({data:v,error:q})=>{q?console.error("Error fetching user dance styles:",q):v&&o(v),y(!1)}),I.from("dance_styles").select("*").eq("is_active",!0).order("name").then(({data:v,error:q})=>{q?console.error("Error fetching dance styles:",q):v&&u(v)}))},[s?.id,N]);const Z=async v=>{const q=v.target.files?.[0];if(!(!q||!s?.id)){if(q.size>5*1024*1024){alert("Plik jest za duży. Maksymalny rozmiar to 5MB.");return}if(!q.type.startsWith("image/")){alert("Proszę wybrać plik graficzny.");return}l(!0);try{if(r?.profile_photo_url){const Vs=r.profile_photo_url.split("/").pop();Vs&&await I.storage.from("profile-photos").remove([`${s.id}/${Vs}`])}const ze=q.name.split(".").pop(),ss=`${Date.now()}.${ze}`,ke=`${s.id}/${ss}`,{error:Me,data:Zs}=await I.storage.from("profile-photos").upload(ke,q,{cacheControl:"3600",upsert:!1});if(Me)throw Me;const{data:{publicUrl:ys}}=I.storage.from("profile-photos").getPublicUrl(ke);_(ys),G("profile_photo_url",ys);const{error:Hs}=await I.from("users").update({profile_photo_url:ys}).eq("id",s.id);if(Hs)throw Hs}catch(ze){console.error("Error uploading photo:",ze),alert("Nie udało się przesłać zdjęcia. Spróbuj ponownie.")}finally{l(!1)}}},g=async()=>{if(!(!s?.id||!r?.profile_photo_url)&&confirm("Czy na pewno chcesz usunąć zdjęcie profilowe?")){l(!0);try{const v=r.profile_photo_url.split("/").pop();v&&await I.storage.from("profile-photos").remove([`${s.id}/${v}`]);const{error:q}=await I.from("users").update({profile_photo_url:null}).eq("id",s.id);if(q)throw q;_(null),G("profile_photo_url",null)}catch(v){console.error("Error removing photo:",v),alert("Nie udało się usunąć zdjęcia. Spróbuj ponownie.")}finally{l(!1)}}},B=async()=>{if(!s?.id)return;const v=V("new_dance_style_id"),q=V("new_skill_level"),ze=V("new_years_experience"),ss=V("new_is_teaching");if(!(!v||!q))try{const{data:ke,error:Me}=await I.from("user_dance_styles").insert({user_id:s.id,dance_style_id:v,skill_level:q,years_experience:ze||null,is_teaching:ss||!1}).select(`
          *,
          dance_style:dance_styles(*)
        `).single();if(Me)throw Me;ke&&(o([...n,ke]),k(!1),G("new_dance_style_id",""),G("new_skill_level",""),G("new_years_experience",""),G("new_is_teaching",!1))}catch(ke){console.error("Error adding dance style:",ke),alert("Nie udało się dodać stylu tańca. Spróbuj ponownie.")}},A=async v=>{if(confirm("Czy na pewno chcesz usunąć ten styl tańca?"))try{const{error:q}=await I.from("user_dance_styles").delete().eq("id",v);if(q)throw q;o(n.filter(ze=>ze.id!==v))}catch(q){console.error("Error removing dance style:",q),alert("Nie udało się usunąć stylu tańca. Spróbuj ponownie.")}},U=v=>{if(!s?.id)return;const{new_dance_style_id:q,new_skill_level:ze,new_years_experience:ss,new_is_teaching:ke,...Me}=v;d({resource:"users",id:s.id,values:Me},{onSuccess:()=>{a("/profiles/show")},onError:Zs=>{console.error("Błąd aktualizacji profilu:",Zs),alert("Wystąpił błąd podczas zapisywania profilu. Spróbuj ponownie.")}})};return t?e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ładowanie danych użytkownika..."})]})})}):s?.id?c?e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ładowanie profilu..."})]})})}):f?e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 text-lg",children:f}),e.jsx(z,{className:"mt-4",onClick:()=>window.location.reload(),children:"Odśwież stronę"})]})})}):e.jsxs(X,{children:[e.jsx(Q,{children:e.jsx(xe,{title:"Mój Profil",description:"Zarządzaj swoimi danymi i preferencjami"})}),e.jsxs(fs,{onSubmit:H(U),children:[e.jsxs(oe,{variant:"1-1-1",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Dane podstawowe"]})}),e.jsxs(M,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs(Y,{label:"Zdjęcie profilowe",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(Ne,{className:"h-24 w-24",children:[e.jsx(Le,{src:b||void 0}),e.jsx(ve,{children:r?.name?.charAt(0)?.toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:Z,className:"hidden"}),e.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:()=>p.current?.click(),disabled:m,children:[e.jsx(Ma,{className:"w-4 h-4 mr-2"}),m?"Przesyłanie...":"Zmień zdjęcie"]}),b&&e.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:g,disabled:m,children:[e.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Usuń"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Dozwolone formaty: JPG, PNG, GIF. Maksymalny rozmiar: 5MB"})]})}),e.jsxs(oe,{variant:"1-2-2",children:[e.jsx(Y,{label:"Imię i nazwisko",htmlFor:"name",error:D.name?.message,required:!0,children:e.jsx(T,{id:"name",...E("name",{required:"Imię jest wymagane"})})}),e.jsx(Y,{label:"Email",htmlFor:"email",error:D.email?.message,required:!0,children:e.jsx(T,{id:"email",type:"email",...E("email",{required:"Email jest wymagany"}),disabled:!0})}),e.jsx(Y,{label:"Data urodzenia",htmlFor:"birth_date",error:D.birth_date?.message,children:e.jsx(T,{id:"birth_date",type:"date",...E("birth_date")})}),e.jsx(Y,{label:"Wzrost (cm)",htmlFor:"height",error:D.height?.message,children:e.jsx(T,{id:"height",type:"number",min:"100",max:"250",...E("height",{min:{value:100,message:"Minimalny wzrost to 100cm"},max:{value:250,message:"Maksymalny wzrost to 250cm"},valueAsNumber:!0})})})]}),e.jsx(Y,{label:"O mnie",htmlFor:"bio",error:D.bio?.message,children:e.jsx(es,{id:"bio",rows:4,placeholder:"Opowiedz coś o sobie...",...E("bio",{maxLength:{value:500,message:"Maksymalnie 500 znaków"}})})}),e.jsxs(oe,{variant:"1-2-2",children:[e.jsx(Y,{label:"Jestem trenerem",children:e.jsxs(Q,{variant:"start",children:[e.jsx(_e,{checked:V("is_trainer")||!1,onCheckedChange:v=>G("is_trainer",v)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Zaznacz jeśli prowadzisz zajęcia taneczne"})]})}),e.jsx(Y,{label:"Posiadam szkołę tańca",children:e.jsxs(Q,{variant:"start",children:[e.jsx(_e,{checked:V("is_school_owner")||!1,onCheckedChange:v=>G("is_school_owner",v)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Zaznacz jeśli prowadzisz szkołę tańca"})]})})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Lokalizacja i prywatność"]})}),e.jsxs(M,{children:[e.jsxs(oe,{variant:"1-2-2",children:[e.jsx(Y,{label:"Miasto",htmlFor:"city",error:D.city?.message,children:e.jsx(T,{id:"city",placeholder:"np. Warszawa",...E("city")})}),e.jsx(Y,{label:"Promień wyszukiwania (km)",htmlFor:"search_radius_km",error:D.search_radius_km?.message,children:e.jsx(T,{id:"search_radius_km",type:"number",min:"5",max:"200",defaultValue:50,...E("search_radius_km",{min:{value:5,message:"Minimum 5km"},max:{value:200,message:"Maksimum 200km"},valueAsNumber:!0})})}),e.jsx(Y,{label:"Widoczność profilu",error:D.visibility?.message,children:e.jsxs(ne,{value:V("visibility")||"public",onValueChange:v=>G("visibility",v),children:[e.jsx(re,{children:e.jsx(le,{placeholder:"Wybierz widoczność"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"public",children:"Publiczny"}),e.jsx(P,{value:"friends",children:"Tylko znajomi"}),e.jsx(P,{value:"private",children:"Prywatny"})]})]})})]}),e.jsxs(oe,{variant:"1-2-2",children:[e.jsx(Y,{label:"Pokaż wiek",children:e.jsxs(Q,{variant:"start",children:[e.jsx(_e,{checked:V("show_age")!==!1,onCheckedChange:v=>G("show_age",v)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Twój wiek będzie widoczny w profilu"})]})}),e.jsx(Y,{label:"Pokaż dokładną lokalizację",children:e.jsxs(Q,{variant:"start",children:[e.jsx(_e,{checked:V("show_exact_location")||!1,onCheckedChange:v=>G("show_exact_location",v)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Pokazuj dokładną lokalizację zamiast tylko miasta"})]})})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Style tańca"]}),n.length>0&&e.jsx(L,{variant:"secondary",children:n.length})]})}),e.jsxs(M,{children:[n.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:n.map(v=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:v.dance_style?.name||"Nieznany styl"}),v.dance_style?.category&&e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:v.dance_style.category})]}),e.jsx(z,{type:"button",variant:"ghost",size:"sm",onClick:()=>A(v.id),children:e.jsx(Ra,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(L,{variant:"outline",className:"capitalize",children:v.skill_level}),v.is_teaching&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Uczę"]}),v.years_experience&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["• ",v.years_experience," ",v.years_experience===1?"rok":v.years_experience<5?"lata":"lat"]})]})]},v.id))}),j?e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/20",children:[e.jsxs(oe,{variant:"1-2-2",children:[e.jsx(Y,{label:"Styl tańca",required:!0,children:e.jsxs(ne,{value:V("new_dance_style_id")||"",onValueChange:v=>G("new_dance_style_id",v),children:[e.jsx(re,{children:e.jsx(le,{placeholder:"Wybierz styl"})}),e.jsx(ie,{children:h.filter(v=>!n.some(q=>q.dance_style_id===v.id)).map(v=>e.jsxs(P,{value:v.id,children:[v.name," ",v.category&&`(${v.category})`]},v.id))})]})}),e.jsx(Y,{label:"Poziom zaawansowania",required:!0,children:e.jsxs(ne,{value:V("new_skill_level")||"",onValueChange:v=>G("new_skill_level",v),children:[e.jsx(re,{children:e.jsx(le,{placeholder:"Wybierz poziom"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"beginner",children:"Początkujący"}),e.jsx(P,{value:"intermediate",children:"Średniozaawansowany"}),e.jsx(P,{value:"advanced",children:"Zaawansowany"}),e.jsx(P,{value:"professional",children:"Profesjonalny"})]})]})}),e.jsx(Y,{label:"Lata doświadczenia",children:e.jsx(T,{type:"number",min:"0",max:"50",...E("new_years_experience",{valueAsNumber:!0,min:0,max:50})})}),e.jsx(Y,{label:"Uczę tego stylu",children:e.jsxs(Q,{variant:"start",children:[e.jsx(_e,{checked:V("new_is_teaching")||!1,onCheckedChange:v=>G("new_is_teaching",v)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Zaznacz jeśli uczysz tego stylu"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{type:"button",size:"sm",onClick:B,disabled:!V("new_dance_style_id")||!V("new_skill_level"),children:"Dodaj styl"}),e.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>{k(!1),G("new_dance_style_id",""),G("new_skill_level",""),G("new_years_experience",""),G("new_is_teaching",!1)},children:"Anuluj"})]})]}):e.jsxs(z,{type:"button",variant:"outline",size:"sm",onClick:()=>k(!0),className:"w-full",children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Dodaj styl tańca"]})]})]})]}),e.jsxs(gs,{children:[e.jsx(z,{type:"submit",disabled:$,children:$?"Zapisywanie...":"Zapisz zmiany"}),e.jsx(z,{type:"button",variant:"outline",onClick:()=>a("/profiles/show"),disabled:$,children:"Anuluj"})]})]})]}):e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 text-lg",children:"Nie można załadować danych użytkownika"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Spróbuj odświeżyć stronę"})]})})})},Ei=()=>{const{data:s,isLoading:t}=je(),a=pe(),[r,i]=x.useState(null),[n,o]=x.useState([]),[h,u]=x.useState(!1),[c,y]=x.useState(null);if(x.useEffect(()=>{s?.id&&(u(!0),y(null),I.from("users").select("*").eq("id",s.id).single().then(({data:w,error:m})=>{m?(console.error("Error fetching user:",m),y("Nie udało się pobrać danych użytkownika")):w&&i(w)}),I.from("user_dance_styles").select(`
          *,
          dance_style:dance_styles(*)
        `).eq("user_id",s.id).order("created_at",{ascending:!1}).then(({data:w,error:m})=>{m?console.error("Error fetching dance styles:",m):w&&o(w),u(!1)}))},[s?.id]),t)return e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ładowanie danych użytkownika..."})]})})});if(!s?.id)return e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 text-lg",children:"Nie można załadować danych użytkownika"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Spróbuj odświeżyć stronę"})]})})});if(h)return e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ładowanie profilu..."})]})})});if(c||!r)return e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 text-lg",children:c||"Nie znaleziono profilu"}),e.jsx(z,{className:"mt-4",onClick:()=>window.location.reload(),children:"Odśwież stronę"})]})})});const f=r.birth_date?new Date().getFullYear()-new Date(r.birth_date).getFullYear():null;return e.jsxs(X,{children:[e.jsxs(Q,{children:[e.jsx(xe,{title:"Mój Profil",description:"Podgląd Twojego profilu"}),e.jsxs(z,{onClick:()=>a("/profiles/edit"),children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Edytuj profil"]})]}),e.jsxs(oe,{children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Informacje podstawowe"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsxs(Ne,{className:"h-32 w-32",children:[e.jsx(Le,{src:r.profile_photo_url||void 0}),e.jsx(ve,{className:"text-2xl",children:r.name?.charAt(0)?.toUpperCase()||"U"})]}),!r.profile_photo_url&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-2",children:[e.jsx(Ma,{className:"w-3 h-3 inline mr-1"}),"Brak zdjęcia"]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Imię i nazwisko"}),e.jsx("p",{className:"text-lg",children:r.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsxs("p",{className:"text-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),r.email]})]}),r.birth_date&&f&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Wiek"}),e.jsxs("p",{className:"text-lg flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),f," lat"]})]}),r.height&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Wzrost"}),e.jsxs("p",{className:"text-lg flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),r.height," cm"]})]})]})]}),r.bio&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"O mnie"}),e.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:r.bio})]})]}),e.jsx(me,{}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.is_trainer&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Trener"]}),r.is_school_owner&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Właściciel szkoły"]}),r.is_verified&&e.jsxs(L,{variant:"default",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Zweryfikowany"]})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Lokalizacja"]})}),e.jsxs(M,{className:"space-y-3",children:[r.city&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Miasto"}),e.jsx("p",{className:"text-lg",children:r.city})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Promień wyszukiwania"}),e.jsxs("p",{className:"text-lg",children:[r.search_radius_km||50," km"]})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Style tańca"]})}),e.jsx(M,{children:n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(w=>e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.dance_style?.name||"Nieznany styl"}),w.dance_style?.category&&e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:w.dance_style.category})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(L,{variant:"outline",className:"capitalize",children:w.skill_level}),w.is_teaching&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Uczę"]})]})]}),w.years_experience&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Doświadczenie: ",w.years_experience," ",w.years_experience===1?"rok":w.years_experience<5?"lata":"lat"]})]},w.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nie dodano jeszcze żadnych stylów tańca"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Ustawienia prywatności"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Widoczność profilu"}),e.jsx(L,{variant:"outline",className:"capitalize",children:r.visibility==="public"?"Publiczny":r.visibility==="friends"?"Znajomi":"Prywatny"})]}),e.jsx(me,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm flex items-center gap-2",children:[r.show_age?e.jsx(Ds,{className:"w-3 h-3"}):e.jsx(Ks,{className:"w-3 h-3"}),"Pokazuj wiek"]}),e.jsx("span",{className:"text-sm font-medium",children:r.show_age?"Tak":"Nie"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm flex items-center gap-2",children:[r.show_exact_location?e.jsx(Ds,{className:"w-3 h-3"}):e.jsx(Ks,{className:"w-3 h-3"}),"Dokładna lokalizacja"]}),e.jsx("span",{className:"text-sm font-medium",children:r.show_exact_location?"Tak":"Nie"})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Status konta"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Status"}),e.jsx(L,{variant:r.is_active?"default":"secondary",children:r.is_active?"Aktywny":"Nieaktywny"})]}),e.jsx(me,{}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Utworzono:"," ",new Date(r.created_at).toLocaleDateString("pl-PL")]}),e.jsxs("p",{children:["Ostatnia aktualizacja:"," ",new Date(r.updated_at).toLocaleDateString("pl-PL")]})]})]})]})]})]})]})},Li={name:"users",list:"/profiles",show:"/profiles/show",edit:"/profiles/edit",meta:{label:"Mój Profil"}},Mi=[e.jsx(J,{path:"/profiles/show",element:e.jsx(Ei,{})},"profiles-show"),e.jsx(J,{path:"/profiles/edit",element:e.jsx(Di,{})},"profiles-edit")],ws=({current:s,pageSize:t,total:a,setCurrent:r,setPageSize:i,itemName:n="elementów",pageSizeOptions:o=[10,20,50]})=>{const h=Math.ceil(a/t),u=(s-1)*t+1,c=Math.min(s*t,a),y=s>1,f=s<h,w=()=>{const m=[];if(h<=5)for(let b=1;b<=h;b++)m.push(b);else{m.push(1),s>3&&m.push("...");const b=Math.max(2,s-1),_=Math.min(h-1,s+1);for(let j=b;j<=_;j++)m.push(j);s<h-2&&m.push("..."),m.push(h)}return m};return a===0?null:e.jsxs(Q,{className:"mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Pokazuje ",u,"-",c," z ",a," ",n]}),e.jsxs(Q,{className:"gap-2",children:[i&&e.jsxs(ne,{value:t.toString(),onValueChange:m=>{i(parseInt(m)),r(1)},children:[e.jsx(re,{className:"w-[100px]",children:e.jsx(le,{})}),e.jsx(ie,{children:o.map(m=>e.jsxs(P,{value:m.toString(),children:[m," / str."]},m))})]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>r(s-1),disabled:!y,children:e.jsx(Es,{className:"w-4 h-4"})}),e.jsx("div",{className:"hidden sm:flex gap-1",children:w().map((m,l)=>m==="..."?e.jsx("span",{className:"px-3 py-1 text-sm text-muted-foreground",children:"..."},`ellipsis-${l}`):e.jsx(z,{variant:s===m?"default":"outline",size:"sm",onClick:()=>r(m),className:"min-w-[40px]",children:m},m))}),e.jsxs("div",{className:"flex sm:hidden items-center px-3 text-sm",children:[s," / ",h]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>r(s+1),disabled:!f,children:e.jsx(cs,{className:"w-4 h-4"})})]})]})},Ri=()=>{const{create:s}=ye(),{tableQuery:{data:t,isLoading:a,isError:r},current:i,setCurrent:n,pageSize:o,setFilters:h}=us({sorters:{initial:[{field:"name",order:"asc"}]}}),u=Ze({isLoading:a,isError:r});return u||e.jsxs(X,{children:[e.jsxs(Q,{children:[e.jsx(xe,{title:"Style tańca",description:"Katalog dostępnych stylów tańca"}),e.jsxs(z,{onClick:()=>s("dance_styles"),children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Dodaj styl"]})]}),e.jsx(Q,{children:e.jsx(T,{placeholder:"Szukaj stylów...",className:"max-w-sm",onChange:c=>{h([{field:"name",operator:"contains",value:c.target.value}])}})}),e.jsx(oe,{children:t?.data?.map(c=>e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(Q,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),c.name]}),e.jsxs(L,{variant:"outline",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),c.dancers_count||0]})]})}),c.description&&e.jsx(M,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:c.description})})]},c.id))}),e.jsx(ws,{current:i,pageSize:o,total:t?.total||0,setCurrent:n,itemName:"stylów"})]})},Ai=()=>{const{list:s}=ye(),{refineCore:{onFinish:t},register:a,handleSubmit:r,formState:{errors:i,isSubmitting:n}}=hs();return e.jsxs(X,{children:[e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>s("dance_styles"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Powrót do listy"]}),e.jsx(Q,{children:e.jsx(xe,{title:"Dodaj styl tańca",description:"Dodaj nowy styl do katalogu"})}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{children:"Informacje o stylu"})}),e.jsx(M,{children:e.jsxs(fs,{onSubmit:r(t),children:[e.jsx(Y,{label:"Nazwa stylu",htmlFor:"name",error:i.name?.message,required:!0,children:e.jsx(T,{id:"name",placeholder:"np. Salsa Kubańska",...a("name",{required:"Nazwa stylu jest wymagana",minLength:{value:2,message:"Nazwa musi mieć minimum 2 znaki"}})})}),e.jsx(Y,{label:"Kategoria",htmlFor:"category",error:i.category?.message,children:e.jsx(T,{id:"category",placeholder:"np. Latynoamerykańskie, Standardowe, Uliczne",...a("category")})}),e.jsx(Y,{label:"Opis",htmlFor:"description",error:i.description?.message,children:e.jsx(es,{id:"description",placeholder:"Opisz charakterystykę stylu, pochodzenie, podstawowe kroki...",rows:4,...a("description")})}),e.jsxs(gs,{children:[e.jsx(z,{type:"button",variant:"outline",onClick:()=>s("dance_styles"),children:"Anuluj"}),e.jsx(z,{type:"submit",disabled:n,children:n?"Dodawanie...":"Dodaj styl"})]})]})})]})]})},Ii={name:"dance_styles",list:"/dance-styles",create:"/dance-styles/create",meta:{canDelete:!1,label:"Style tańca"}},Fi=[e.jsx(J,{path:"/dance-styles",element:e.jsx(Ri,{})},"dance-styles-list"),e.jsx(J,{path:"/dance-styles/create",element:e.jsx(Ai,{})},"dance-styles-create")],Ti=()=>{const{data:s}=je(),{show:t}=ye(),[a,r]=x.useState([]),[i,n]=x.useState([]),[o,h]=x.useState([]),[u,c]=x.useState(!0),[y,f]=x.useState("matches");x.useEffect(()=>{s?.id&&w()},[s?.id]);const w=async()=>{if(s?.id){c(!0);try{const{data:j,error:k}=await I.from("likes").select(`
          *,
          to_user:v_public_dancers!likes_to_user_id_fkey (
            id,
            name,
            profile_photo_url,
            city,
            age,
            bio,
            is_verified
          )
        `).eq("from_user_id",s.id);if(k)throw k;const{data:p,error:d}=await I.from("likes").select(`
          *,
          from_user:v_public_dancers!likes_from_user_id_fkey (
            id,
            name,
            profile_photo_url,
            city,
            age,
            bio,
            is_verified
          )
        `).eq("to_user_id",s.id);if(d)throw d;const E=[],H=[],G=[];j?.forEach(V=>{p?.some(D=>D.from_user_id===V.to_user_id)?E.push(V):H.push(V)}),p?.forEach(V=>{E.some(D=>D.to_user_id===V.from_user_id)||G.push(V)}),r(E),n(H),h(G)}catch(j){console.error("Error fetching data:",j),K.error("Błąd pobierania danych")}finally{c(!1)}}},m=async j=>{try{const{error:k}=await I.from("likes").delete().eq("id",j);if(k)throw k;K.success("Usunięto polubienie"),w()}catch(k){console.error("Error removing like:",k),K.error("Błąd usuwania polubienia")}},l=j=>{const k=new Date(j),d=Math.abs(new Date().getTime()-k.getTime()),E=Math.ceil(d/(1e3*60*60*24));return E===0?"Dzisiaj":E===1?"Wczoraj":E<7?`${E} dni temu`:E<30?`${Math.floor(E/7)} tyg. temu`:`${Math.floor(E/30)} mies. temu`},b=({user:j,likeDate:k,likeId:p,showRemove:d=!1})=>j?e.jsx(S,{className:"group hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden",onClick:()=>t("v_public_dancers",j.id),children:e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsxs(Ne,{className:"h-16 w-16 flex-shrink-0",children:[e.jsx(Le,{src:j.profile_photo_url||void 0}),e.jsx(ve,{className:"text-lg bg-gradient-to-br from-pink-400 to-purple-400 text-white",children:j.name?.charAt(0)?.toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-base truncate",children:j.name}),j.is_verified&&e.jsx(L,{variant:"secondary",className:"text-xs",children:e.jsx(Se,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[j.age&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"}),j.age," lat"]}),j.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),j.city]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l(k)})]}),e.jsxs("div",{className:"flex gap-2",children:[y==="matches"&&e.jsx(z,{size:"sm",variant:"default",onClick:E=>{E.stopPropagation(),K.info("Funkcja czatu będzie dostępna wkrótce")},children:e.jsx(Ls,{className:"w-4 h-4"})}),d&&e.jsx(z,{size:"sm",variant:"ghost",onClick:E=>{E.stopPropagation(),m(p)},children:e.jsx(he,{className:"w-4 h-4 fill-current"})}),e.jsx(z,{size:"sm",variant:"ghost",className:"group-hover:bg-accent",children:e.jsx(ds,{className:"w-4 h-4"})})]})]})}):null,_=({icon:j,title:k,description:p})=>e.jsxs(S,{className:"p-12 text-center border-dashed",children:[e.jsx(j,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:k}),e.jsx("p",{className:"text-muted-foreground",children:p})]});return u?e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsxs(X,{children:[e.jsx(Q,{children:e.jsx(xe,{title:"Polubienia i dopasowania",description:"Zarządzaj swoimi połączeniami z innymi tancerzami"})}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsxs(L,{variant:"outline",className:"text-sm",children:[e.jsx(vs,{className:"w-3 h-3 mr-1"}),a.length," dopasowań"]}),e.jsxs(L,{variant:"outline",className:"text-sm",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),i.length," polubionych"]}),e.jsxs(L,{variant:"outline",className:"text-sm",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),o.length," polubień"]})]}),e.jsxs(gi,{value:y,onValueChange:f,children:[e.jsxs(Ha,{className:"grid w-full grid-cols-3",children:[e.jsxs(is,{value:"matches",className:"gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"Dopasowania (",a.length,")"]}),e.jsxs(is,{value:"my-likes",className:"gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Moje polubienia (",i.length,")"]}),e.jsxs(is,{value:"likes-me",className:"gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Polubili mnie (",o.length,")"]})]}),e.jsx(ns,{value:"matches",className:"mt-6 space-y-3",children:a.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"🎉 Gratulacje! Masz wzajemne dopasowania. Możesz rozpocząć rozmowę."}),a.map(j=>e.jsx(b,{user:j.to_user,likeDate:j.created_at,likeId:j.id},j.id))]}):e.jsx(_,{icon:vs,title:"Brak dopasowań",description:"Gdy ktoś kogo polubiłeś również Cię polubi, pojawi się tutaj jako dopasowanie"})}),e.jsx(ns,{value:"my-likes",className:"mt-6 space-y-3",children:i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Profile które polubiłeś. Czekaj aż odwzajemnią polubienie!"}),i.map(j=>e.jsx(b,{user:j.to_user,likeDate:j.created_at,likeId:j.id,showRemove:!0},j.id))]}):e.jsx(_,{icon:he,title:"Brak polubionych profili",description:"Przeglądaj profile i polub tych, którzy Ci się spodobają"})}),e.jsx(ns,{value:"likes-me",className:"mt-6 space-y-3",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Te osoby czekają na Twoje polubienie. Polub je, aby utworzyć dopasowanie!"}),o.map(j=>e.jsx(b,{user:j.from_user,likeDate:j.created_at,likeId:j.id},j.id))]}):e.jsx(_,{icon:Ke,title:"Nikt jeszcze Cię nie polubił",description:"Uzupełnij swój profil i dodaj zdjęcia, aby zwiększyć szanse na polubienia"})})]})]})},Oi={name:"matches",list:"/matches",meta:{label:"Dopasowania"}},Wi=[e.jsx(J,{path:"/matches",element:e.jsx(Ti,{})},"matches-list")],Is=({targetUserId:s,variant:t="default",className:a="",onLikeChange:r,initialLiked:i=!1})=>{const{data:n}=je(),[o,h]=x.useState(i),[u,c]=x.useState(!1),[y,f]=x.useState(!0),[w,m]=x.useState(!1);x.useEffect(()=>{n?.id&&s&&i===void 0?l():f(!1)},[n?.id,s,i]);const l=async()=>{if(n?.id)try{const{data:_,error:j}=await I.from("likes").select("id").eq("from_user_id",n.id).eq("to_user_id",s).single();!j&&_&&h(!0)}catch(_){console.error("Error checking like status:",_)}finally{f(!1)}},b=async _=>{if(_.stopPropagation(),!n?.id){K.error("Musisz być zalogowany",{description:"Zaloguj się, aby polubić profile"});return}if(n.id===s){K.error("Nie możesz polubić własnego profilu");return}o||(m(!0),setTimeout(()=>m(!1),600)),c(!0);try{if(o){const{error:j}=await I.from("likes").delete().eq("from_user_id",n.id).eq("to_user_id",s);if(j)throw j;h(!1),r?.(!1),K.info("Usunięto polubienie",{description:"Profil został usunięty z polubionych"})}else{const{error:j}=await I.from("likes").insert({from_user_id:n.id,to_user_id:s});if(j)throw j;h(!0),r?.(!0);const{data:k}=await I.from("likes").select("id").eq("from_user_id",s).eq("to_user_id",n.id).single();k?K.success("To dopasowanie! 🎉",{description:"Oboje się polubiliście! Możecie teraz rozpocząć konwersację."}):K.success("Polubiono profil",{description:"Profil został dodany do polubionych"})}}catch(j){console.error("Error handling like:",j),K.error("Błąd",{description:"Nie udało się zaktualizować polubienia"})}finally{c(!1)}};return n?.id===s?null:t==="card"?e.jsxs("button",{className:C("relative",a),onClick:b,disabled:u||y,children:[e.jsx("div",{className:C("w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300",o?"bg-gradient-to-br from-pink-500 to-red-500 shadow-xl":"bg-white shadow-lg border-2 border-gray-200 hover:border-red-300","hover:scale-110 hover:shadow-xl"),children:e.jsx(he,{className:C("w-6 h-6 transition-all duration-300",o?"text-white fill-white":"text-red-500 hover:fill-red-500",w&&"animate-ping")})}),w&&e.jsx("div",{className:"absolute inset-0 rounded-full animate-ping bg-pink-400/50"}),e.jsx("div",{className:C("absolute inset-0 rounded-full opacity-0 hover:opacity-100","bg-gradient-to-br from-pink-400/20 to-red-400/20","transition-opacity duration-300")})]}):e.jsxs(z,{variant:o?"default":"outline",onClick:b,disabled:u||y,className:a,children:[e.jsx(he,{className:`w-4 h-4 mr-2 ${o?"fill-current":""}`}),o?"Polubione":"Polub profil"]})},$i=()=>{const[s,t]=x.useState(""),{tableQuery:{data:a,isLoading:r,isError:i},current:n,setCurrent:o,pageSize:h,setFilters:u}=us({resource:"v_public_dancers",pagination:{pageSize:12},sorters:{initial:[{field:"created_at",order:"desc"}]}}),{show:c}=ye(),y=m=>{t(m),u(m?[{field:"name",operator:"contains",value:m}]:[])},f=Ze({isLoading:r,isError:i});if(f)return f;const w=a?.data||[];return e.jsxs(X,{children:[e.jsx(Q,{children:e.jsx(xe,{title:"Tancerze",description:"Przeglądaj profile tancerzy w Twojej okolicy"})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"Szukaj tancerzy po imieniu...",className:"pl-10",value:s,onChange:m=>y(m.target.value)})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(L,{variant:"outline",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),a?.total||0," tancerzy"]})})]}),e.jsx(oe,{variant:"1-2-3",children:w.map(m=>e.jsxs(S,{className:"group relative overflow-hidden rounded-2xl border-0 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>c("v_public_dancers",m.id),children:[e.jsxs("div",{className:"relative h-[400px] sm:h-[450px] overflow-hidden bg-gradient-to-br from-pink-100 to-purple-100",children:[m.profile_photo_url?e.jsx("img",{src:m.profile_photo_url,alt:m.name,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ne,{className:"h-32 w-32 border-4 border-white shadow-xl",children:e.jsx(ve,{className:"text-4xl bg-gradient-to-br from-pink-400 to-purple-400 text-white",children:m.name?.charAt(0)?.toUpperCase()||"T"})})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[m.is_verified&&e.jsxs(L,{className:"bg-blue-500/90 backdrop-blur-sm text-white border-0 shadow-lg",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Zweryfikowany"]}),m.is_trainer&&e.jsxs(L,{className:"bg-purple-500/90 backdrop-blur-sm text-white border-0 shadow-lg",children:[e.jsx(Ie,{className:"w-4 h-4 mr-1"}),"Trener"]}),m.is_matched&&e.jsxs(L,{className:"bg-green-500/90 backdrop-blur-sm text-white border-0 shadow-lg",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),"Dopasowanie!"]}),!m.is_matched&&m.liked_me&&e.jsxs(L,{className:"bg-pink-500/90 backdrop-blur-sm text-white border-0 shadow-lg",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Lubi Cię!"]})]}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx(Is,{targetUserId:m.id,variant:"card",initialLiked:m.i_liked})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-1",children:[m.name,m.age&&`, ${m.age}`]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm mb-2 opacity-90",children:[m.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),m.city]}),m.height&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Os,{className:"w-3 h-3"}),m.height," cm"]})]}),m.bio&&e.jsx("p",{className:"text-sm opacity-90 line-clamp-2 mb-3",children:m.bio}),m.dance_styles&&m.dance_styles.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[m.dance_styles.slice(0,3).map((l,b)=>e.jsxs(L,{className:"bg-white/20 backdrop-blur-sm text-white border-white/30 text-xs",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),l.style_name]},b)),m.dance_styles.length>3&&e.jsxs(L,{className:"bg-white/20 backdrop-blur-sm text-white border-white/30 text-xs",children:["+",m.dance_styles.length-3]})]})]})]}),e.jsx(M,{className:"p-3 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(z,{size:"sm",variant:"ghost",className:"text-muted-foreground hover:text-primary",onClick:l=>{l.stopPropagation()},children:e.jsx(Ls,{className:"w-4 h-4"})}),e.jsx(z,{size:"sm",variant:"ghost",className:"text-muted-foreground hover:text-primary",onClick:l=>{l.stopPropagation(),c("v_public_dancers",m.id)},children:e.jsx(Ds,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:m.is_matched?e.jsxs(e.Fragment,{children:[e.jsx(Ls,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Możesz pisać!"})]}):m.liked_me?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3 text-pink-500"}),e.jsx("span",{className:"text-pink-600 font-medium",children:"Czeka na polubienie"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-3 h-3"}),e.jsx("span",{children:"Aktywny dzisiaj"})]})})]})})]},m.id))}),w.length===0&&e.jsxs(S,{className:"p-12 text-center border-dashed",children:[e.jsx(ce,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nie znaleziono tancerzy"}),e.jsx("p",{className:"text-muted-foreground",children:s?"Spróbuj zmienić kryteria wyszukiwania":"Brak dostępnych profili w tym momencie"})]}),e.jsx(ws,{current:n,pageSize:h,total:a?.total||0,setCurrent:o,itemName:"tancerzy"})]})},qi=()=>{const{queryResult:s}=Da({resource:"v_public_dancers"}),{list:t}=ye(),{data:a,isLoading:r,isError:i}=s,n=a?.data,o=Ze({isLoading:r,isError:i});if(o)return o;if(!n)return e.jsx("div",{className:"p-6 mx-auto",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 text-lg",children:"Profil nie został znaleziony"}),e.jsx(z,{className:"mt-4",onClick:()=>t("v_public_dancers"),children:"Wróć do listy"})]})});const h=u=>({beginner:"Początkujący",intermediate:"Średniozaawansowany",advanced:"Zaawansowany",professional:"Profesjonalny"})[u]||u;return e.jsxs(X,{children:[e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>t("v_public_dancers"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Wróć do listy"]}),e.jsx(S,{children:e.jsx(M,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start",children:[e.jsxs(Ne,{className:"h-24 w-24 flex-shrink-0",children:[e.jsx(Le,{src:n.profile_photo_url||void 0}),e.jsx(ve,{className:"text-2xl",children:n.name?.charAt(0)?.toUpperCase()||"T"})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2 flex-wrap",children:[n.name,n.is_verified&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Zweryfikowany"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground mt-2",children:[n.age&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-4 h-4"}),n.age," lat"]}),n.height&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Os,{className:"w-4 h-4"}),n.height," cm"]}),n.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-4 h-4"}),n.city]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.is_trainer&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Ie,{className:"w-4 h-4 mr-1"}),"Trener"]}),n.is_matched&&e.jsxs(L,{variant:"default",className:"bg-green-500",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),"Dopasowanie!"]}),!n.is_matched&&n.liked_me&&e.jsxs(L,{variant:"default",className:"bg-pink-500",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Lubi Cię!"]})]}),e.jsx(Is,{targetUserId:n.id,variant:"default",initialLiked:n.i_liked})]})]})})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.bio&&e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"O mnie"]})}),e.jsx(M,{children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.bio})})]}),n.dance_styles&&n.dance_styles.length>0&&e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Style taneczne (",n.dance_styles.length,")"]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-3",children:n.dance_styles.map((u,c)=>e.jsxs("div",{className:"border rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.style_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Poziom: ",h(u.skill_level)]})]}),u.is_teaching&&e.jsx(L,{variant:"outline",children:"Uczy"})]},c))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Szczegóły profilu"})}),e.jsx(M,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Dołączył"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(n.created_at).toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx(me,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Status profilu"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.is_verified&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Zweryfikowany"]}),n.is_trainer&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Trener"]}),n.is_matched&&e.jsxs(L,{variant:"default",className:"bg-green-500",children:[e.jsx(Se,{className:"w-3 h-3 mr-1"}),"Dopasowanie"]}),!n.is_matched&&n.liked_me&&e.jsxs(L,{variant:"default",className:"bg-pink-500",children:[e.jsx(he,{className:"w-3 h-3 mr-1"}),"Lubi Cię"]})]})]})]})})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Akcje"})}),e.jsxs(M,{className:"space-y-2",children:[e.jsx(Is,{targetUserId:n.id,variant:"default",className:"w-full",initialLiked:n.i_liked}),e.jsx(z,{variant:"outline",className:"w-full",disabled:!n.is_matched,children:n.is_matched?"Wyślij wiadomość":"Najpierw musicie się dopasować"}),e.jsx(z,{variant:"outline",className:"w-full",children:"Zgłoś profil"})]})]})]})]})]})},Bi={name:"v_public_dancers",list:"/dancers",show:"/dancers/show/:id",meta:{label:"Tancerze"}},Ui=[e.jsx(J,{path:"/dancers",element:e.jsx($i,{})},"dancers-list"),e.jsx(J,{path:"/dancers/show/:id",element:e.jsx(qi,{})},"dancers-show")],Zi={lessThanXSeconds:{one:{regular:"mniej niż sekunda",past:"mniej niż sekundę",future:"mniej niż sekundę"},twoFour:"mniej niż {{count}} sekundy",other:"mniej niż {{count}} sekund"},xSeconds:{one:{regular:"sekunda",past:"sekundę",future:"sekundę"},twoFour:"{{count}} sekundy",other:"{{count}} sekund"},halfAMinute:{one:"pół minuty",twoFour:"pół minuty",other:"pół minuty"},lessThanXMinutes:{one:{regular:"mniej niż minuta",past:"mniej niż minutę",future:"mniej niż minutę"},twoFour:"mniej niż {{count}} minuty",other:"mniej niż {{count}} minut"},xMinutes:{one:{regular:"minuta",past:"minutę",future:"minutę"},twoFour:"{{count}} minuty",other:"{{count}} minut"},aboutXHours:{one:{regular:"około godziny",past:"około godziny",future:"około godzinę"},twoFour:"około {{count}} godziny",other:"około {{count}} godzin"},xHours:{one:{regular:"godzina",past:"godzinę",future:"godzinę"},twoFour:"{{count}} godziny",other:"{{count}} godzin"},xDays:{one:{regular:"dzień",past:"dzień",future:"1 dzień"},twoFour:"{{count}} dni",other:"{{count}} dni"},aboutXWeeks:{one:"około tygodnia",twoFour:"około {{count}} tygodni",other:"około {{count}} tygodni"},xWeeks:{one:"tydzień",twoFour:"{{count}} tygodnie",other:"{{count}} tygodni"},aboutXMonths:{one:"około miesiąc",twoFour:"około {{count}} miesiące",other:"około {{count}} miesięcy"},xMonths:{one:"miesiąc",twoFour:"{{count}} miesiące",other:"{{count}} miesięcy"},aboutXYears:{one:"około rok",twoFour:"około {{count}} lata",other:"około {{count}} lat"},xYears:{one:"rok",twoFour:"{{count}} lata",other:"{{count}} lat"},overXYears:{one:"ponad rok",twoFour:"ponad {{count}} lata",other:"ponad {{count}} lat"},almostXYears:{one:"prawie rok",twoFour:"prawie {{count}} lata",other:"prawie {{count}} lat"}};function Hi(s,t){if(t===1)return s.one;const a=t%100;if(a<=20&&a>10)return s.other;const r=a%10;return r>=2&&r<=4?s.twoFour:s.other}function Ps(s,t,a){const r=Hi(s,t);return(typeof r=="string"?r:r[a]).replace("{{count}}",String(t))}const Vi=(s,t,a)=>{const r=Zi[s];return a?.addSuffix?a.comparison&&a.comparison>0?"za "+Ps(r,t,"future"):Ps(r,t,"past")+" temu":Ps(r,t,"regular")},Gi={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},Ki={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ji={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yi={date:zs({formats:Gi,defaultWidth:"full"}),time:zs({formats:Ki,defaultWidth:"full"}),dateTime:zs({formats:Ji,defaultWidth:"full"})},Qi={masculine:"ostatni",feminine:"ostatnia"},Xi={masculine:"ten",feminine:"ta"},en={masculine:"następny",feminine:"następna"},sn={0:"feminine",1:"masculine",2:"masculine",3:"feminine",4:"masculine",5:"masculine",6:"feminine"};function aa(s,t,a,r){let i;if($r(t,a,r))i=Xi;else if(s==="lastWeek")i=Qi;else if(s==="nextWeek")i=en;else throw new Error(`Cannot determine adjectives for token ${s}`);const n=t.getDay(),o=sn[n];return`'${i[o]}' eeee 'o' p`}const an={lastWeek:aa,yesterday:"'wczoraj o' p",today:"'dzisiaj o' p",tomorrow:"'jutro o' p",nextWeek:aa,other:"P"},tn=(s,t,a,r)=>{const i=an[s];return typeof i=="function"?i(s,t,a,r):i},rn={narrow:["p.n.e.","n.e."],abbreviated:["p.n.e.","n.e."],wide:["przed naszą erą","naszej ery"]},nn={narrow:["1","2","3","4"],abbreviated:["I kw.","II kw.","III kw.","IV kw."],wide:["I kwartał","II kwartał","III kwartał","IV kwartał"]},ln={narrow:["S","L","M","K","M","C","L","S","W","P","L","G"],abbreviated:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],wide:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"]},on={narrow:["s","l","m","k","m","c","l","s","w","p","l","g"],abbreviated:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paź","lis","gru"],wide:["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","września","października","listopada","grudnia"]},cn={narrow:["N","P","W","Ś","C","P","S"],short:["nie","pon","wto","śro","czw","pią","sob"],abbreviated:["niedz.","pon.","wt.","śr.","czw.","pt.","sob."],wide:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},dn={narrow:["n","p","w","ś","c","p","s"],short:["nie","pon","wto","śro","czw","pią","sob"],abbreviated:["niedz.","pon.","wt.","śr.","czw.","pt.","sob."],wide:["niedziela","poniedziałek","wtorek","środa","czwartek","piątek","sobota"]},mn={narrow:{am:"a",pm:"p",midnight:"półn.",noon:"poł",morning:"rano",afternoon:"popoł.",evening:"wiecz.",night:"noc"},abbreviated:{am:"AM",pm:"PM",midnight:"północ",noon:"południe",morning:"rano",afternoon:"popołudnie",evening:"wieczór",night:"noc"},wide:{am:"AM",pm:"PM",midnight:"północ",noon:"południe",morning:"rano",afternoon:"popołudnie",evening:"wieczór",night:"noc"}},xn={narrow:{am:"a",pm:"p",midnight:"o półn.",noon:"w poł.",morning:"rano",afternoon:"po poł.",evening:"wiecz.",night:"w nocy"},abbreviated:{am:"AM",pm:"PM",midnight:"o północy",noon:"w południe",morning:"rano",afternoon:"po południu",evening:"wieczorem",night:"w nocy"},wide:{am:"AM",pm:"PM",midnight:"o północy",noon:"w południe",morning:"rano",afternoon:"po południu",evening:"wieczorem",night:"w nocy"}},un=(s,t)=>String(s),hn={ordinalNumber:un,era:He({values:rn,defaultWidth:"wide"}),quarter:He({values:nn,defaultWidth:"wide",argumentCallback:s=>s-1}),month:He({values:ln,defaultWidth:"wide",formattingValues:on,defaultFormattingWidth:"wide"}),day:He({values:cn,defaultWidth:"wide",formattingValues:dn,defaultFormattingWidth:"wide"}),dayPeriod:He({values:mn,defaultWidth:"wide",formattingValues:xn,defaultFormattingWidth:"wide"})},pn=/^(\d+)?/i,jn=/\d+/i,fn={narrow:/^(p\.?\s*n\.?\s*e\.?\s*|n\.?\s*e\.?\s*)/i,abbreviated:/^(p\.?\s*n\.?\s*e\.?\s*|n\.?\s*e\.?\s*)/i,wide:/^(przed\s*nasz(ą|a)\s*er(ą|a)|naszej\s*ery)/i},gn={any:[/^p/i,/^n/i]},wn={narrow:/^[1234]/i,abbreviated:/^(I|II|III|IV)\s*kw\.?/i,wide:/^(I|II|III|IV)\s*kwarta(ł|l)/i},yn={narrow:[/1/i,/2/i,/3/i,/4/i],any:[/^I kw/i,/^II kw/i,/^III kw/i,/^IV kw/i]},Nn={narrow:/^[slmkcwpg]/i,abbreviated:/^(sty|lut|mar|kwi|maj|cze|lip|sie|wrz|pa(ź|z)|lis|gru)/i,wide:/^(stycznia|stycze(ń|n)|lutego|luty|marca|marzec|kwietnia|kwiecie(ń|n)|maja|maj|czerwca|czerwiec|lipca|lipiec|sierpnia|sierpie(ń|n)|wrze(ś|s)nia|wrzesie(ń|n)|pa(ź|z)dziernika|pa(ź|z)dziernik|listopada|listopad|grudnia|grudzie(ń|n))/i},vn={narrow:[/^s/i,/^l/i,/^m/i,/^k/i,/^m/i,/^c/i,/^l/i,/^s/i,/^w/i,/^p/i,/^l/i,/^g/i],any:[/^st/i,/^lu/i,/^mar/i,/^k/i,/^maj/i,/^c/i,/^lip/i,/^si/i,/^w/i,/^p/i,/^lis/i,/^g/i]},bn={narrow:/^[npwścs]/i,short:/^(nie|pon|wto|(ś|s)ro|czw|pi(ą|a)|sob)/i,abbreviated:/^(niedz|pon|wt|(ś|s)r|czw|pt|sob)\.?/i,wide:/^(niedziela|poniedzia(ł|l)ek|wtorek|(ś|s)roda|czwartek|pi(ą|a)tek|sobota)/i},zn={narrow:[/^n/i,/^p/i,/^w/i,/^ś/i,/^c/i,/^p/i,/^s/i],abbreviated:[/^n/i,/^po/i,/^w/i,/^(ś|s)r/i,/^c/i,/^pt/i,/^so/i],any:[/^n/i,/^po/i,/^w/i,/^(ś|s)r/i,/^c/i,/^pi/i,/^so/i]},kn={narrow:/^(^a$|^p$|pó(ł|l)n\.?|o\s*pó(ł|l)n\.?|po(ł|l)\.?|w\s*po(ł|l)\.?|po\s*po(ł|l)\.?|rano|wiecz\.?|noc|w\s*nocy)/i,any:/^(am|pm|pó(ł|l)noc|o\s*pó(ł|l)nocy|po(ł|l)udnie|w\s*po(ł|l)udnie|popo(ł|l)udnie|po\s*po(ł|l)udniu|rano|wieczór|wieczorem|noc|w\s*nocy)/i},_n={narrow:{am:/^a$/i,pm:/^p$/i,midnight:/pó(ł|l)n/i,noon:/po(ł|l)/i,morning:/rano/i,afternoon:/po\s*po(ł|l)/i,evening:/wiecz/i,night:/noc/i},any:{am:/^am/i,pm:/^pm/i,midnight:/pó(ł|l)n/i,noon:/po(ł|l)/i,morning:/rano/i,afternoon:/po\s*po(ł|l)/i,evening:/wiecz/i,night:/noc/i}},Sn={ordinalNumber:qr({matchPattern:pn,parsePattern:jn,valueCallback:s=>parseInt(s,10)}),era:Ve({matchPatterns:fn,defaultMatchWidth:"wide",parsePatterns:gn,defaultParseWidth:"any"}),quarter:Ve({matchPatterns:wn,defaultMatchWidth:"wide",parsePatterns:yn,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ve({matchPatterns:Nn,defaultMatchWidth:"wide",parsePatterns:vn,defaultParseWidth:"any"}),day:Ve({matchPatterns:bn,defaultMatchWidth:"wide",parsePatterns:zn,defaultParseWidth:"any"}),dayPeriod:Ve({matchPatterns:kn,defaultMatchWidth:"any",parsePatterns:_n,defaultParseWidth:"any"})},ue={code:"pl",formatDistance:Vi,formatLong:Yi,formatRelative:tn,localize:hn,match:Sn,options:{weekStartsOn:1,firstWeekContainsDate:4}},Cn=()=>{const{data:s}=je(),[t,a]=x.useState(""),[r,i]=x.useState("all"),[n,o]=x.useState("published"),{tableQuery:{data:h,isLoading:u,isError:c},current:y,setCurrent:f,pageSize:w,setFilters:m}=us({resource:"events",pagination:{pageSize:12},filters:{initial:[{field:"status",operator:"eq",value:"published"}]},sorters:{initial:[{field:"start_at",order:"asc"}]}}),{show:l,create:b}=ye(),_=g=>{a(g),p(g,r,n)},j=g=>{i(g),p(t,g,n)},k=g=>{o(g),p(t,r,g)},p=(g,B,A)=>{const U=[];A!=="all"&&U.push({field:"status",operator:"eq",value:A}),B!=="all"&&U.push({field:"event_type",operator:"eq",value:B}),g&&U.push({field:"title",operator:"contains",value:g}),m(U)},d=Ze({isLoading:u,isError:c});if(d)return d;const E=h?.data||[],H=g=>({lesson:e.jsx(Oa,{className:"w-4 h-4"}),workshop:e.jsx(Ie,{className:"w-4 h-4"}),social:e.jsx(Ta,{className:"w-4 h-4"}),competition:e.jsx($s,{className:"w-4 h-4"}),performance:e.jsx(Fa,{className:"w-4 h-4"})})[g]||e.jsx(We,{className:"w-4 h-4"}),G=g=>({lesson:"Lekcja",workshop:"Warsztaty",social:"Potańcówka",competition:"Zawody",performance:"Występ"})[g]||g,V=g=>({physical:e.jsx(de,{className:"w-3 h-3"}),online:e.jsx(ms,{className:"w-3 h-3"}),hybrid:e.jsx(ce,{className:"w-3 h-3"})})[g]||e.jsx(de,{className:"w-3 h-3"}),N=g=>({beginner:"Początkujący",intermediate:"Średniozaawansowany",advanced:"Zaawansowany",professional:"Profesjonalny"})[g]||g,D=g=>{const B={draft:{icon:e.jsx(Wa,{className:"w-3 h-3"}),variant:"secondary",label:"Szkic"},published:{icon:e.jsx(Re,{className:"w-3 h-3"}),variant:"default",label:"Opublikowane"},cancelled:{icon:e.jsx(Ms,{className:"w-3 h-3"}),variant:"destructive",label:"Odwołane"},completed:{icon:e.jsx(Re,{className:"w-3 h-3"}),variant:"outline",label:"Zakończone"}},A=B[g]||B.draft;return e.jsxs(L,{variant:A.variant,children:[A.icon,e.jsx("span",{className:"ml-1",children:A.label})]})},$=g=>new Date(g)<new Date,Z=(g,B)=>{const A=new Date(g),U=new Date(B);return A.toDateString()===U.toDateString()?`${te(A,"d MMM yyyy",{locale:ue})} • ${te(A,"HH:mm")} - ${te(U,"HH:mm")}`:`${te(A,"d MMM",{locale:ue})} - ${te(U,"d MMM yyyy",{locale:ue})}`};return e.jsxs(X,{children:[e.jsxs(Q,{children:[e.jsx(xe,{title:"Wydarzenia",description:"Przeglądaj i zarządzaj wydarzeniami tanecznymi"}),e.jsxs(z,{onClick:()=>b("events"),children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Dodaj wydarzenie"]})]}),e.jsxs(Q,{children:[e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"Szukaj wydarzeń...",className:"pl-10",value:t,onChange:g=>_(g.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ne,{value:r,onValueChange:j,children:[e.jsxs(re,{className:"w-[160px]",children:[e.jsx(Ia,{className:"w-4 h-4 mr-2"}),e.jsx(le,{placeholder:"Typ wydarzenia"})]}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Wszystkie typy"}),e.jsx(P,{value:"lesson",children:"Lekcje"}),e.jsx(P,{value:"workshop",children:"Warsztaty"}),e.jsx(P,{value:"social",children:"Potańcówki"}),e.jsx(P,{value:"competition",children:"Zawody"}),e.jsx(P,{value:"performance",children:"Występy"})]})]}),e.jsxs(ne,{value:n,onValueChange:k,children:[e.jsx(re,{className:"w-[140px]",children:e.jsx(le,{placeholder:"Status"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Wszystkie"}),e.jsx(P,{value:"published",children:"Opublikowane"}),e.jsx(P,{value:"draft",children:"Szkice"}),e.jsx(P,{value:"cancelled",children:"Odwołane"}),e.jsx(P,{value:"completed",children:"Zakończone"})]})]})]}),e.jsxs(L,{variant:"outline",children:[e.jsx(We,{className:"w-3 h-3 mr-1"}),h?.total||0," wydarzeń"]})]}),e.jsx(oe,{variant:"1-2-3",children:E.map(g=>{const B=$(g.end_at),A=g.organizer_id===s?.id,U=g.max_participants?g.max_participants-g.participant_count:null,v=U!==null&&U<=0;return e.jsxs(S,{className:`group relative overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer ${B?"opacity-60":""}`,onClick:()=>l("events",g.id),children:[e.jsxs(F,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs(L,{variant:"secondary",className:"flex items-center gap-1",children:[H(g.event_type),G(g.event_type)]}),A&&e.jsx(L,{variant:"outline",className:"text-xs",children:"Moje wydarzenie"})]}),e.jsx("h3",{className:"text-lg font-semibold line-clamp-2 mt-2",children:g.title})]}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ge,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:Z(g.start_at,g.end_at)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[V(g.location_type),e.jsx("span",{className:"line-clamp-1",children:g.location_type==="online"?g.online_platform||"Online":g.location_name||g.city||"Brak lokalizacji"})]}),g.dance_style&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(L,{variant:"outline",className:"text-xs",children:g.dance_style.name})]}),(g.skill_level_min||g.skill_level_max)&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Poziom: ",g.skill_level_min&&N(g.skill_level_min),g.skill_level_min&&g.skill_level_max&&g.skill_level_min!==g.skill_level_max&&" - ",g.skill_level_max&&g.skill_level_min!==g.skill_level_max&&N(g.skill_level_max)]}),g.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:g.description}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g.price>0?e.jsxs(L,{variant:"outline",className:"text-xs",children:[e.jsx(Sr,{className:"w-3 h-3 mr-1"}),g.price," ",g.currency]}):e.jsx(L,{variant:"outline",className:"text-xs text-green-600",children:"Bezpłatne"}),g.requires_partner&&e.jsxs(L,{variant:"outline",className:"text-xs",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"W parze"]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(ce,{className:"w-3 h-3"}),g.participant_count,g.max_participants&&e.jsxs("span",{className:"text-muted-foreground",children:["/",g.max_participants]}),v&&e.jsx(L,{variant:"destructive",className:"ml-1 text-xs",children:"Brak miejsc"})]})]}),g.status!=="published"&&e.jsx("div",{className:"pt-2",children:D(g.status)})]})]},g.id)})}),E.length===0&&e.jsxs(S,{className:"p-12 text-center border-dashed",children:[e.jsx(We,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nie znaleziono wydarzeń"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||r!=="all"||n!=="published"?"Spróbuj zmienić kryteria wyszukiwania":"Brak dostępnych wydarzeń w tym momencie"}),e.jsxs(z,{onClick:()=>b("events"),children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Dodaj pierwsze wydarzenie"]})]}),e.jsx(ws,{current:y,pageSize:w,total:h?.total||0,setCurrent:f,itemName:"wydarzeń"})]})};var Xa="AlertDialog",[Pn,zl]=Na(Xa,[ka]),be=ka(),et=s=>{const{__scopeAlertDialog:t,...a}=s,r=be(t);return e.jsx(Yt,{...r,...a,modal:!0})};et.displayName=Xa;var Dn="AlertDialogTrigger",En=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,i=be(a);return e.jsx(Qt,{...i,...r,ref:t})});En.displayName=Dn;var Ln="AlertDialogPortal",st=s=>{const{__scopeAlertDialog:t,...a}=s,r=be(t);return e.jsx(Zt,{...r,...a})};st.displayName=Ln;var Mn="AlertDialogOverlay",at=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,i=be(a);return e.jsx(Ut,{...i,...r,ref:t})});at.displayName=Mn;var $e="AlertDialogContent",[Rn,An]=Pn($e),In=Gt("AlertDialogContent"),tt=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,children:r,...i}=s,n=be(a),o=x.useRef(null),h=xs(t,o),u=x.useRef(null);return e.jsx(Ht,{contentName:$e,titleName:rt,docsSlug:"alert-dialog",children:e.jsx(Rn,{scope:a,cancelRef:u,children:e.jsxs(Vt,{role:"alertdialog",...n,...i,ref:h,onOpenAutoFocus:ba(i.onOpenAutoFocus,c=>{c.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(In,{children:r}),e.jsx(Tn,{contentRef:o})]})})})});tt.displayName=$e;var rt="AlertDialogTitle",it=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,i=be(a);return e.jsx(Kt,{...i,...r,ref:t})});it.displayName=rt;var nt="AlertDialogDescription",lt=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,i=be(a);return e.jsx(Jt,{...i,...r,ref:t})});lt.displayName=nt;var Fn="AlertDialogAction",ot=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,i=be(a);return e.jsx(_a,{...i,...r,ref:t})});ot.displayName=Fn;var ct="AlertDialogCancel",dt=x.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,{cancelRef:i}=An(ct,a),n=be(a),o=xs(t,i);return e.jsx(_a,{...n,...r,ref:o})});dt.displayName=ct;var Tn=({contentRef:s})=>{const t=`\`${$e}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$e}\` by passing a \`${nt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$e}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},On=et,Wn=st,mt=at,xt=tt,ut=ot,ht=dt,pt=it,jt=lt;const $n=On,qn=Wn,ft=x.forwardRef(({className:s,...t},a)=>e.jsx(mt,{className:C("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));ft.displayName=mt.displayName;const gt=x.forwardRef(({className:s,...t},a)=>e.jsxs(qn,{children:[e.jsx(ft,{}),e.jsx(xt,{ref:a,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));gt.displayName=xt.displayName;const wt=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",s),...t});wt.displayName="AlertDialogHeader";const yt=({className:s,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});yt.displayName="AlertDialogFooter";const Nt=x.forwardRef(({className:s,...t},a)=>e.jsx(pt,{ref:a,className:C("text-lg font-semibold",s),...t}));Nt.displayName=pt.displayName;const vt=x.forwardRef(({className:s,...t},a)=>e.jsx(jt,{ref:a,className:C("text-sm text-muted-foreground",s),...t}));vt.displayName=jt.displayName;const bt=x.forwardRef(({className:s,...t},a)=>e.jsx(ut,{ref:a,className:C(Bs(),s),...t}));bt.displayName=ut.displayName;const zt=x.forwardRef(({className:s,...t},a)=>e.jsx(ht,{ref:a,className:C(Bs({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));zt.displayName=ht.displayName;const Bn=()=>{const{data:s}=je(),{queryResult:t}=Da({resource:"events",meta:{select:"*, dance_style:dance_styles(*), organizer:users(*)"}}),{list:a,edit:r}=ye(),{mutate:i}=cr(),[n,o]=x.useState(!1),[h,u]=x.useState(null),[c,y]=x.useState(!1),{data:f,isLoading:w,isError:m}=t,l=f?.data;x.useState(()=>{s?.id&&l?.id&&I.from("event_participants").select("*").eq("event_id",l.id).eq("user_id",s.id).single().then(({data:A})=>{A&&u(A)})});const b=Ze({isLoading:w,isError:m});if(b)return b;if(!l)return e.jsx(X,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 text-lg",children:"Wydarzenie nie zostało znalezione"}),e.jsx(z,{className:"mt-4",onClick:()=>a("events"),children:"Wróć do listy"})]})});const _=l.organizer_id===s?.id,j=new Date(l.end_at)<new Date,k=new Date(l.start_at)>new Date,p=!j&&!k,d=l.max_participants?l.max_participants-l.participant_count:null,E=d!==null&&d<=0,H=!j&&!E&&l.status==="published"&&!_,G=A=>({lesson:e.jsx(Oa,{className:"w-5 h-5"}),workshop:e.jsx(Ie,{className:"w-5 h-5"}),social:e.jsx(Ta,{className:"w-5 h-5"}),competition:e.jsx($s,{className:"w-5 h-5"}),performance:e.jsx(Fa,{className:"w-5 h-5"})})[A]||e.jsx(We,{className:"w-5 h-5"}),V=A=>({lesson:"Lekcja",workshop:"Warsztaty",social:"Potańcówka",competition:"Zawody",performance:"Występ"})[A]||A,N=A=>({physical:"Stacjonarne",online:"Online",hybrid:"Hybrydowe"})[A]||A,D=A=>({beginner:"Początkujący",intermediate:"Średniozaawansowany",advanced:"Zaawansowany",professional:"Profesjonalny"})[A]||A,$=A=>{const U={draft:{icon:e.jsx(Wa,{className:"w-4 h-4"}),variant:"secondary",label:"Szkic"},published:{icon:e.jsx(Re,{className:"w-4 h-4"}),variant:"default",label:"Opublikowane"},cancelled:{icon:e.jsx(Ms,{className:"w-4 h-4"}),variant:"destructive",label:"Odwołane"},completed:{icon:e.jsx(Re,{className:"w-4 h-4"}),variant:"outline",label:"Zakończone"}},v=U[A]||U.draft;return e.jsxs(L,{variant:v.variant,children:[v.icon,e.jsx("span",{className:"ml-1",children:v.label})]})},Z=async()=>{if(!s?.id){K.error("Musisz być zalogowany",{description:"Zaloguj się, aby zapisać się na wydarzenie"});return}o(!0);try{if(h){const{error:A}=await I.from("event_participants").delete().eq("id",h.id);if(A)throw A;u(null),K.success("Wypisano z wydarzenia")}else{const{data:A,error:U}=await I.from("event_participants").insert({event_id:l.id,user_id:s.id,status:"registered"}).select().single();if(U)throw U;u(A),K.success("Zapisano na wydarzenie!",{description:"Otrzymasz potwierdzenie na email"})}}catch(A){console.error("Registration error:",A),K.error("Błąd",{description:A.message||"Nie udało się wykonać operacji"})}finally{o(!1)}},g=()=>{i({resource:"events",id:l.id},{onSuccess:()=>{K.success("Wydarzenie zostało usunięte"),a("events")},onError:A=>{console.error("Delete error:",A),K.error("Nie udało się usunąć wydarzenia")}})},B=()=>{navigator.share?navigator.share({title:l.title,text:l.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),K.success("Link skopiowany do schowka"))};return e.jsxs(X,{children:[e.jsxs(Q,{children:[e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>a("events"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Wróć do listy"]}),_&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>r("events",l.id),children:[e.jsx(Aa,{className:"w-4 h-4 mr-2"}),"Edytuj"]}),e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>y(!0),children:[e.jsx(Ra,{className:"w-4 h-4 mr-2"}),"Usuń"]})]})]}),e.jsx(S,{children:e.jsx(M,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(L,{variant:"default",className:"text-sm",children:[G(l.event_type),e.jsx("span",{className:"ml-1",children:V(l.event_type)})]}),$(l.status),j&&e.jsxs(L,{variant:"secondary",children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"Zakończone"]}),p&&e.jsxs(L,{variant:"default",className:"bg-green-500",children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"W trakcie"]}),l.is_recurring&&e.jsxs(L,{variant:"outline",children:[e.jsx(Cr,{className:"w-3 h-3 mr-1"}),"Cykliczne"]})]}),e.jsx("h1",{className:"text-3xl font-bold",children:l.title}),l.organizer&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsxs("span",{children:["Organizator: ",l.organizer.name]}),l.organizer.is_verified&&e.jsxs(L,{variant:"outline",className:"text-xs",children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"Zweryfikowany"]})]})]})})}),e.jsxs(oe,{children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.description&&e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Opis wydarzenia"]})}),e.jsx(M,{children:e.jsx("p",{className:"whitespace-pre-wrap",children:l.description})})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Szczegóły"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Data i czas"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-muted-foreground"}),te(new Date(l.start_at),"EEEE, d MMMM yyyy",{locale:ue})]}),e.jsxs("p",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ge,{className:"w-4 h-4"}),te(new Date(l.start_at),"HH:mm")," -",te(new Date(l.end_at),"HH:mm")]})]})]}),e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Lokalizacja"}),e.jsx(L,{variant:"outline",className:"mb-2",children:N(l.location_type)}),l.location_type==="online"?e.jsxs("div",{className:"space-y-2 mt-2",children:[l.online_platform&&e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4 text-muted-foreground"}),l.online_platform]}),l.online_link&&e.jsxs("a",{href:l.online_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline",children:[e.jsx(Js,{className:"w-4 h-4"}),"Link do spotkania",e.jsx(bs,{className:"w-3 h-3"})]})]}):e.jsxs("div",{className:"space-y-2 mt-2",children:[l.location_name&&e.jsx("p",{className:"font-medium",children:l.location_name}),l.address&&e.jsxs("p",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(de,{className:"w-4 h-4"}),l.address]}),l.city&&e.jsx("p",{className:"text-muted-foreground",children:l.city})]})]}),(l.dance_style||l.skill_level_min||l.skill_level_max)&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.dance_style&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Styl tańca"}),e.jsxs(L,{variant:"secondary",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),l.dance_style.name]})]}),(l.skill_level_min||l.skill_level_max)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Poziom"}),e.jsxs("p",{className:"text-sm",children:[l.skill_level_min&&D(l.skill_level_min),l.skill_level_min&&l.skill_level_max&&l.skill_level_min!==l.skill_level_max&&" - ",l.skill_level_max&&l.skill_level_min!==l.skill_level_max&&D(l.skill_level_max)]})]})]})]}),(l.requires_partner||l.age_min||l.age_max)&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Wymagania"}),e.jsxs("div",{className:"space-y-1",children:[l.requires_partner&&e.jsxs(L,{variant:"outline",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Wymagany partner"]}),(l.age_min||l.age_max)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Wiek: ",l.age_min||"0"," - ",l.age_max||"99"," lat"]})]})]})]}),(l.website_url||l.registration_url)&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Linki"}),e.jsxs("div",{className:"space-y-2",children:[l.website_url&&e.jsxs("a",{href:l.website_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline",children:[e.jsx(ms,{className:"w-4 h-4"}),"Strona wydarzenia",e.jsx(bs,{className:"w-3 h-3"})]}),l.registration_url&&e.jsxs("a",{href:l.registration_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary hover:underline",children:[e.jsx(Js,{className:"w-4 h-4"}),"Rejestracja zewnętrzna",e.jsx(bs,{className:"w-3 h-3"})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Udział"})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Cena"}),l.price>0?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[l.price," ",l.currency]}),l.early_bird_price&&l.early_bird_deadline&&new Date(l.early_bird_deadline)>new Date&&e.jsxs("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 rounded-md",children:[e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400",children:[e.jsx(Pr,{className:"w-3 h-3 inline mr-1"}),"Early Bird: ",l.early_bird_price," ",l.currency]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["do ",te(new Date(l.early_bird_deadline),"d MMM",{locale:ue})]})]})]}):e.jsx(L,{variant:"default",className:"bg-green-500",children:"Bezpłatne"})]}),e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Liczba miejsc"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),l.participant_count," zapisanych"]}),l.max_participants&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["z ",l.max_participants]})]}),d!==null&&d>0&&d<=5&&e.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400 mt-2",children:["Pozostało tylko ",d," ",d===1?"miejsce":"miejsca","!"]}),E&&e.jsx(L,{variant:"destructive",className:"mt-2 w-full justify-center",children:"Brak wolnych miejsc"})]}),!_&&e.jsxs(e.Fragment,{children:[e.jsx(me,{}),e.jsx(z,{className:"w-full",variant:h?"outline":"default",disabled:!H&&!h||n,onClick:Z,children:n?"Przetwarzanie...":h?e.jsxs(e.Fragment,{children:[e.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Wypisz się"]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"Zapisz się"]})}),!H&&!h&&e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:j?"Wydarzenie się zakończyło":E?"Brak wolnych miejsc":l.status!=="published"?"Wydarzenie nie jest opublikowane":"Rejestracja niedostępna"})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Akcje"})}),e.jsxs(M,{className:"space-y-2",children:[e.jsxs(z,{variant:"outline",className:"w-full",onClick:B,children:[e.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Udostępnij"]}),e.jsxs(z,{variant:"outline",className:"w-full",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Dodaj do ulubionych"]}),l.organizer&&e.jsxs(z,{variant:"outline",className:"w-full",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Kontakt z organizatorem"]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Informacje"})}),e.jsxs(M,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Utworzono:"," ",te(new Date(l.created_at),"d MMM yyyy",{locale:ue})]}),e.jsxs("p",{children:["Ostatnia aktualizacja:"," ",te(new Date(l.updated_at),"d MMM yyyy",{locale:ue})]}),e.jsxs("p",{children:["ID wydarzenia: ",l.id.slice(0,8),"..."]})]})]})]})]}),e.jsx($n,{open:c,onOpenChange:y,children:e.jsxs(gt,{children:[e.jsxs(wt,{children:[e.jsx(Nt,{children:"Czy na pewno chcesz usunąć to wydarzenie?"}),e.jsxs(vt,{children:['Ta akcja jest nieodwracalna. Wydarzenie "',l.title,'" zostanie trwale usunięte wraz ze wszystkimi zapisami uczestników.']})]}),e.jsxs(yt,{children:[e.jsx(zt,{children:"Anuluj"}),e.jsx(bt,{onClick:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Usuń wydarzenie"})]})]})})]})},Us=x.forwardRef(({className:s,...t},a)=>e.jsx(Sa,{className:C("grid gap-2",s),...t,ref:a}));Us.displayName=Sa.displayName;const Ae=x.forwardRef(({className:s,...t},a)=>e.jsx(Ca,{ref:a,className:C("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx(Xt,{className:"flex items-center justify-center",children:e.jsx(Er,{className:"h-3.5 w-3.5 fill-primary"})})}));Ae.displayName=Ca.displayName;const Un=()=>{const{list:s}=ye(),{data:t}=je(),[a,r]=x.useState([]),[i,n]=x.useState(1),{register:o,handleSubmit:h,setValue:u,watch:c,formState:{errors:y,isSubmitting:f}}=hs({defaultValues:{event_category:"lesson",location_type:"physical",visibility:"public",status:"published",requires_partner:!1}}),w=c("event_category"),m=c("location_type"),l=c("price_amount");x.useEffect(()=>{(async()=>{const{data:d,error:E}=await I.from("dance_styles").select("id, name, category").order("name");d&&r(d)})()},[]);const b=[{value:"lesson",label:"Lekcja",icon:e.jsx(De,{className:"w-4 h-4"}),description:"Indywidualne lub grupowe zajęcia"},{value:"workshop",label:"Warsztaty",icon:e.jsx(qs,{className:"w-4 h-4"}),description:"Intensywne szkolenie tematyczne"},{value:"social",label:"Potańcówka",icon:e.jsx(Se,{className:"w-4 h-4"}),description:"Impreza taneczna"},{value:"competition",label:"Zawody",icon:e.jsx($s,{className:"w-4 h-4"}),description:"Turniej taneczny"},{value:"performance",label:"Występ",icon:e.jsx($a,{className:"w-4 h-4"}),description:"Pokaz taneczny"}],_=async p=>{if(!t?.id){K.error("Błąd",{description:"Musisz być zalogowany, aby utworzyć wydarzenie"});return}try{const d={organizer_id:t.id,title:p.title,description:p.description,event_type:p.event_category,dance_style_id:p.dance_style_id||null,start_at:new Date(`${p.event_date}T${p.start_time}`).toISOString(),end_at:new Date(`${p.event_date}T${p.end_time}`).toISOString(),is_recurring:!1,location_type:p.location_type,location_name:p.location_name||null,address:p.address||null,city:p.city||null,online_platform:p.online_platform||null,online_link:p.online_link||null,price:p.price_amount?parseFloat(p.price_amount):0,currency:"PLN",max_participants:p.max_participants?parseInt(p.max_participants):null,min_participants:1,participant_count:0,skill_level_min:p.skill_level_required||null,skill_level_max:p.skill_level_required||null,requires_partner:p.requires_partner,visibility:p.visibility,status:p.status},{data:E,error:H}=await I.from("events").insert(d).select().single();if(H)throw new Error(H.message);K.success("Sukces!",{description:"Wydarzenie zostało utworzone"}),s("events")}catch(d){console.error("Błąd podczas tworzenia wydarzenia:",d),K.error("Błąd",{description:"Nie udało się utworzyć wydarzenia"})}},j=[{number:1,title:"Podstawy",icon:e.jsx(Te,{className:"w-4 h-4"})},{number:2,title:"Termin",icon:e.jsx(Be,{className:"w-4 h-4"})},{number:3,title:"Miejsce",icon:e.jsx(de,{className:"w-4 h-4"})},{number:4,title:"Szczegóły",icon:e.jsx(ce,{className:"w-4 h-4"})}],k=()=>{switch(i){case 1:return c("title")&&c("event_category")&&c("description");case 2:return c("event_date")&&c("start_time")&&c("end_time");case 3:return m==="online"?c("online_platform"):c("address")&&c("city");case 4:return!0;default:return!1}};return e.jsxs("div",{className:"min-h-screen bg-gray-50/50",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white border-b",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4  flex items-center justify-between h-16",children:[e.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>s("events"),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Anuluj"]}),e.jsx("h1",{className:"font-semibold text-xl",children:"Nowe wydarzenie"}),e.jsx("div",{className:"w-20"})]})}),e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:j.map((p,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{type:"button",onClick:()=>i>p.number&&n(p.number),className:C("flex items-center gap-2 px-3 py-2 rounded-lg transition-all",i===p.number&&"bg-purple-100 text-purple-700",i>p.number&&"text-green-600 cursor-pointer hover:bg-gray-100",i<p.number&&"text-gray-400"),disabled:i<p.number,children:[e.jsx("div",{className:C("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all",i===p.number&&"bg-purple-600 text-white",i>p.number&&"bg-green-600 text-white",i<p.number&&"bg-gray-200"),children:i>p.number?e.jsx(Ce,{className:"w-5 h-5"}):p.number}),e.jsx("span",{className:"hidden sm:inline font-medium",children:p.title})]}),d<j.length-1&&e.jsx("div",{className:C("w-12 h-0.5 mx-2",i>p.number?"bg-green-600":"bg-gray-200")})]},p.number))})})}),e.jsxs("form",{onSubmit:h(_),className:"max-w-3xl mx-auto px-4 py-6",children:[i===1&&e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{children:"O czym jest Twoje wydarzenie?"})}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-base font-medium mb-3 block",children:"Wybierz typ wydarzenia"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:b.map(p=>e.jsxs("button",{type:"button",onClick:()=>u("event_category",p.value),className:C("p-4 rounded-lg border-2 transition-all text-left",w===p.value?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:C("p-1.5 rounded",w===p.value?"bg-purple-600 text-white":"bg-gray-100"),children:p.icon}),e.jsx("span",{className:"font-medium",children:p.label})]}),e.jsx("p",{className:"text-xs text-gray-600",children:p.description})]},p.value))})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"title",children:["Nazwa wydarzenia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"title",placeholder:"np. Salsa kubańska dla początkujących",className:"mt-1",...o("title",{required:"Nazwa jest wymagana",minLength:{value:5,message:"Nazwa musi mieć minimum 5 znaków"}})}),y.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.title.message)})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"dance_style_id",children:"Styl tańca"}),e.jsxs(ne,{value:c("dance_style_id"),onValueChange:p=>u("dance_style_id",p),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Wybierz styl tańca"})}),e.jsx(ie,{children:a.map(p=>e.jsx(P,{value:p.id,children:p.name},p.id))})]})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"description",children:["Opis wydarzenia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(es,{id:"description",placeholder:"Opisz co będzie się działo, dla kogo jest wydarzenie, czego nauczysz...",rows:4,className:"mt-1",...o("description",{required:"Opis jest wymagany",minLength:{value:20,message:"Opis musi mieć minimum 20 znaków"}})}),y.description&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.description.message)})]})]})]})}),i===2&&e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{children:"Kiedy się odbędzie?"})}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"event_date",children:["Data ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"event_date",type:"date",min:new Date().toISOString().split("T")[0],className:"mt-1",...o("event_date",{required:"Data jest wymagana"})}),y.event_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.event_date.message)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"start_time",children:["Godzina rozpoczęcia"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"start_time",type:"time",className:"mt-1",...o("start_time",{required:"Godzina rozpoczęcia jest wymagana"})}),y.start_time&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.start_time.message)})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"end_time",children:["Godzina zakończenia"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"end_time",type:"time",className:"mt-1",...o("end_time",{required:"Godzina zakończenia jest wymagana"})}),y.end_time&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.end_time.message)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Popularne godziny:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["18:00","19:00","20:00","10:00","11:00"].map(p=>e.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>u("start_time",p),children:p},p))})]})]})]})}),i===3&&e.jsx("div",{className:"space-y-6",children:e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{children:"Gdzie się odbędzie?"})}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Typ lokalizacji"}),e.jsxs(Us,{value:m,onValueChange:p=>u("location_type",p),className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(Ae,{value:"physical",id:"physical"}),e.jsxs(R,{htmlFor:"physical",className:"flex-1 cursor-pointer",children:[e.jsx("span",{className:"font-medium",children:"Stacjonarne"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Studio, sala, klub"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(Ae,{value:"online",id:"online"}),e.jsxs(R,{htmlFor:"online",className:"flex-1 cursor-pointer",children:[e.jsx("span",{className:"font-medium",children:"Online"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Zoom, Google Meet, itp."})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(Ae,{value:"hybrid",id:"hybrid"}),e.jsxs(R,{htmlFor:"hybrid",className:"flex-1 cursor-pointer",children:[e.jsx("span",{className:"font-medium",children:"Hybrydowe"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Stacjonarnie i online"})]})]})]})]}),m==="online"?e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"online_platform",children:["Platforma ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(ne,{value:c("online_platform"),onValueChange:p=>u("online_platform",p),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Wybierz platformę"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"zoom",children:"Zoom"}),e.jsx(P,{value:"google_meet",children:"Google Meet"}),e.jsx(P,{value:"skype",children:"Skype"}),e.jsx(P,{value:"other",children:"Inne"})]})]})]}):(m==="physical"||m==="hybrid")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"location_name",children:"Nazwa miejsca"}),e.jsx(T,{id:"location_name",placeholder:"np. Studio Tańca Salsa",className:"mt-1",...o("location_name")})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"address",children:["Adres ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"address",placeholder:"ul. Taneczna 10",className:"mt-1",...o("address",{required:m==="physical"||m==="hybrid"?"Adres jest wymagany":!1})}),y.address&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.address.message)})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"city",children:["Miasto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"city",placeholder:"Warszawa",className:"mt-1",...o("city",{required:m==="physical"||m==="hybrid"?"Miasto jest wymagane":!1})}),y.city&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:String(y.city.message)})]})]})]})]})}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsx(O,{children:"Ostatnie szczegóły"})}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"price_amount",children:"Cena (PLN)"}),e.jsx(T,{id:"price_amount",type:"number",min:"0",step:"5",placeholder:"0",className:"mt-1",...o("price_amount")}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Zostaw puste lub wpisz 0 dla wydarzenia darmowego"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"max_participants",children:"Maksymalna liczba uczestników"}),e.jsx(T,{id:"max_participants",type:"number",min:"1",placeholder:"Bez limitu",className:"mt-1",...o("max_participants")})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"skill_level_required",children:"Poziom zaawansowania"}),e.jsxs(ne,{value:c("skill_level_required"),onValueChange:p=>u("skill_level_required",p),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Dla każdego"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"beginner",children:"Początkujący"}),e.jsx(P,{value:"intermediate",children:"Średniozaawansowany"}),e.jsx(P,{value:"advanced",children:"Zaawansowany"}),e.jsx(P,{value:"professional",children:"Profesjonalny"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"requires_partner",className:"text-base font-medium",children:"Wymagany partner"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Czy uczestnicy muszą przyjść w parach?"})]}),e.jsx(_e,{id:"requires_partner",checked:c("requires_partner"),onCheckedChange:p=>u("requires_partner",p)})]})]})]}),e.jsxs(S,{className:"bg-purple-50 border-purple-200",children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg",children:"Podsumowanie"})}),e.jsxs(M,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nazwa:"}),e.jsx("span",{className:"font-medium",children:c("title")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Data:"}),e.jsx("span",{className:"font-medium",children:c("event_date")&&te(new Date(c("event_date")),"d MMMM yyyy",{locale:ue})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Godzina:"}),e.jsxs("span",{className:"font-medium",children:[c("start_time")," - ",c("end_time")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cena:"}),e.jsx("span",{className:"font-medium",children:l?`${l} PLN`:"Darmowe"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[i>1?e.jsx(z,{type:"button",variant:"outline",onClick:()=>n(i-1),children:"Wstecz"}):e.jsx("div",{}),i<4?e.jsx(z,{type:"button",onClick:()=>n(i+1),disabled:!k(),children:"Dalej"}):e.jsx(z,{type:"submit",disabled:f,children:f?"Tworzenie...":"Utwórz wydarzenie"})]})]})]})},Zn=()=>{const{id:s}=Pa(),{data:t}=je(),a=pe(),[r,i]=x.useState(null),[n,o]=x.useState(!0),[h,u]=x.useState(null),[c,y]=x.useState([]),{register:f,handleSubmit:w,setValue:m,watch:l,reset:b,formState:{errors:_,isSubmitting:j}}=hs();x.useEffect(()=>{(async()=>{const{data:E,error:H}=await I.from("dance_styles").select("id, name, category").order("name");E&&y(E)})()},[]),x.useEffect(()=>{s&&(o(!0),u(null),I.from("events").select("*").eq("id",s).single().then(({data:d,error:E})=>{if(E)console.error("Error fetching event:",E),u("Nie udało się pobrać wydarzenia");else if(d){i(d);const H=new Date(d.start_at),G=new Date(d.end_at),V=N=>{const D=$=>String($).padStart(2,"0");return`${N.getFullYear()}-${D(N.getMonth()+1)}-${D(N.getDate())}T${D(N.getHours())}:${D(N.getMinutes())}`};b({title:d.title,event_type:d.event_type,dance_style_id:d.dance_style_id||"",description:d.description||"",start_at:V(H),end_at:V(G),location_type:d.location_type,online_platform:d.online_platform||"",online_link:d.online_link||"",location_name:d.location_name||"",address:d.address||"",city:d.city||"",max_participants:d.max_participants?.toString()||"",skill_level_min:d.skill_level_min||"all",skill_level_max:d.skill_level_max||"all",requires_partner:d.requires_partner||!1,price:d.price?.toString()||"0",currency:d.currency||"PLN",visibility:d.visibility||"public",status:d.status||"published"})}o(!1)}))},[s,b]);const k=l("location_type"),p=async d=>{if(!t?.id){K.error("Musisz być zalogowany");return}if(!r||r.organizer_id!==t.id){K.error("Nie masz uprawnień do edycji tego wydarzenia");return}try{const E={title:d.title,description:d.description||null,event_type:d.event_type,dance_style_id:d.dance_style_id||null,start_at:new Date(d.start_at).toISOString(),end_at:new Date(d.end_at).toISOString(),location_type:d.location_type,location_name:d.location_name||null,address:d.address||null,city:d.city||null,online_platform:d.online_platform||null,online_link:d.online_link||null,price:parseFloat(d.price)||0,currency:d.currency,max_participants:d.max_participants?parseInt(d.max_participants):null,skill_level_min:d.skill_level_min==="all"?null:d.skill_level_min||null,skill_level_max:d.skill_level_max==="all"?null:d.skill_level_max||null,requires_partner:d.requires_partner||!1,visibility:d.visibility,status:d.status},{error:H}=await I.from("events").update(E).eq("id",s);if(H)throw H;K.success("Wydarzenie zostało zaktualizowane!"),a(`/events/show/${s}`)}catch(E){console.error("Update error:",E),K.error("Błąd aktualizacji",{description:E.message||"Spróbuj ponownie"})}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Ładowanie wydarzenia..."})]})}):h||!r?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 text-lg",children:h||"Wydarzenie nie zostało znalezione"}),e.jsx(z,{className:"mt-4",onClick:()=>a("/events"),children:"Wróć do listy"})]}):r.organizer_id!==t?.id?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-500 text-lg",children:"Nie masz uprawnień do edycji tego wydarzenia"}),e.jsx(z,{className:"mt-4",onClick:()=>a(`/events/show/${s}`),children:"Wróć do wydarzenia"})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50/50",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white border-b",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 flex items-center justify-between h-16",children:[e.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>a(`/events/show/${s}`),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Anuluj"]}),e.jsx("h1",{className:"font-semibold text-xl",children:"Edytuj wydarzenie"}),e.jsx("div",{className:"w-20"})]})}),e.jsxs("form",{onSubmit:w(p),className:"max-w-5xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Podstawowe informacje"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"title",children:["Nazwa wydarzenia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"title",className:"mt-1",...f("title",{required:"Nazwa jest wymagana",minLength:{value:5,message:"Nazwa musi mieć minimum 5 znaków"}})}),_.title&&typeof _.title.message=="string"&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:_.title.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Typ wydarzenia"}),e.jsxs(ne,{value:l("event_type"),onValueChange:d=>m("event_type",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(P,{value:"lesson",children:"Lekcja"}),e.jsx(P,{value:"workshop",children:"Warsztaty"}),e.jsx(P,{value:"social",children:"Potańcówka"}),e.jsx(P,{value:"competition",children:"Zawody"}),e.jsx(P,{value:"performance",children:"Występ"})]})]})]}),e.jsxs("div",{children:[e.jsx(R,{children:"Styl tańca"}),e.jsxs(ne,{value:l("dance_style_id"),onValueChange:d=>m("dance_style_id",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Wybierz styl"})}),e.jsx(ie,{children:c.map(d=>e.jsx(P,{value:d.id,children:d.name},d.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"description",children:"Opis"}),e.jsx(es,{id:"description",rows:4,className:"mt-1",...f("description")})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),"Data i czas"]})}),e.jsx(M,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"start_at",children:["Data i godzina rozpoczęcia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"start_at",type:"datetime-local",className:"mt-1",...f("start_at",{required:"Data rozpoczęcia jest wymagana"})}),_.start_at&&typeof _.start_at.message=="string"&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:_.start_at.message})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"end_at",children:["Data i godzina zakończenia ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(T,{id:"end_at",type:"datetime-local",className:"mt-1",...f("end_at",{required:"Data zakończenia jest wymagana"})}),_.end_at&&typeof _.end_at.message=="string"&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:_.end_at.message})]})]})})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Lokalizacja"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Typ lokalizacji"}),e.jsxs(Us,{value:k,onValueChange:d=>m("location_type",d),className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{value:"physical",id:"physical"}),e.jsx(R,{htmlFor:"physical",className:"font-normal",children:"Stacjonarne"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{value:"online",id:"online"}),e.jsx(R,{htmlFor:"online",className:"font-normal",children:"Online"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{value:"hybrid",id:"hybrid"}),e.jsx(R,{htmlFor:"hybrid",className:"font-normal",children:"Hybrydowe"})]})]})]}),k==="online"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"online_platform",children:"Platforma"}),e.jsx(T,{id:"online_platform",placeholder:"np. Zoom, Google Meet",className:"mt-1",...f("online_platform")})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"online_link",children:"Link do spotkania"}),e.jsx(T,{id:"online_link",type:"url",placeholder:"https://...",className:"mt-1",...f("online_link")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"location_name",children:"Nazwa miejsca"}),e.jsx(T,{id:"location_name",placeholder:"np. Studio Tańca Salsa",className:"mt-1",...f("location_name")})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"address",children:"Adres"}),e.jsx(T,{id:"address",placeholder:"ul. Taneczna 10",className:"mt-1",...f("address")})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"city",children:"Miasto"}),e.jsx(T,{id:"city",placeholder:"Warszawa",className:"mt-1",...f("city")})]})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"Szczegóły"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"price",children:"Cena (PLN)"}),e.jsx(T,{id:"price",type:"number",min:"0",step:"5",className:"mt-1",...f("price")})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"max_participants",children:"Max. liczba uczestników"}),e.jsx(T,{id:"max_participants",type:"number",min:"1",placeholder:"Bez limitu",className:"mt-1",...f("max_participants")})]}),e.jsxs("div",{children:[e.jsx(R,{children:"Poziom minimalny"}),e.jsxs(ne,{value:l("skill_level_min"),onValueChange:d=>m("skill_level_min",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Dla każdego"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Dla każdego"}),e.jsx(P,{value:"beginner",children:"Początkujący"}),e.jsx(P,{value:"intermediate",children:"Średniozaawansowany"}),e.jsx(P,{value:"advanced",children:"Zaawansowany"}),e.jsx(P,{value:"professional",children:"Profesjonalny"})]})]})]}),e.jsxs("div",{children:[e.jsx(R,{children:"Poziom maksymalny"}),e.jsxs(ne,{value:l("skill_level_max"),onValueChange:d=>m("skill_level_max",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{placeholder:"Bez ograniczeń"})}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Bez ograniczeń"}),e.jsx(P,{value:"beginner",children:"Początkujący"}),e.jsx(P,{value:"intermediate",children:"Średniozaawansowany"}),e.jsx(P,{value:"advanced",children:"Zaawansowany"}),e.jsx(P,{value:"professional",children:"Profesjonalny"})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-base font-medium",children:"Wymagany partner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Czy uczestnicy muszą przyjść w parach?"})]}),e.jsx(_e,{checked:l("requires_partner"),onCheckedChange:d=>m("requires_partner",d)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Status"}),e.jsxs(ne,{value:l("status"),onValueChange:d=>m("status",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(P,{value:"draft",children:"Szkic"}),e.jsx(P,{value:"published",children:"Opublikowane"}),e.jsx(P,{value:"cancelled",children:"Odwołane"}),e.jsx(P,{value:"completed",children:"Zakończone"})]})]})]}),e.jsxs("div",{children:[e.jsx(R,{children:"Widoczność"}),e.jsxs(ne,{value:l("visibility"),onValueChange:d=>m("visibility",d),children:[e.jsx(re,{className:"mt-1",children:e.jsx(le,{})}),e.jsxs(ie,{children:[e.jsx(P,{value:"public",children:"Publiczne"}),e.jsx(P,{value:"private",children:"Prywatne"}),e.jsx(P,{value:"unlisted",children:"Niewidoczne w liście"})]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(z,{type:"button",variant:"outline",onClick:()=>a(`/events/show/${s}`),children:"Anuluj"}),e.jsx(z,{type:"submit",disabled:j,children:j?"Zapisywanie...":"Zapisz zmiany"})]})]})]})},Hn={name:"events",list:"/events",show:"/events/show/:id",create:"/events/create",edit:"/events/edit/:id",meta:{label:"Wydarzenia"}},Vn=[e.jsx(J,{path:"/events",element:e.jsx(Cn,{})},"events-list"),e.jsx(J,{path:"/events/show/:id",element:e.jsx(Bn,{})},"events-show"),e.jsx(J,{path:"/events/create",element:e.jsx(Un,{})},"events-create"),e.jsx(J,{path:"/events/edit/:id",element:e.jsx(Zn,{})},"events-edit")],Gn=()=>{const[s,t]=x.useState(""),[a,r]=x.useState("all"),[i,n]=x.useState("all"),[o,h]=x.useState({}),{tableQuery:{data:u,isLoading:c,isError:y},current:f,setCurrent:w,pageSize:m,setFilters:l}=us({resource:"users",pagination:{pageSize:12},filters:{initial:[{field:"is_trainer",operator:"eq",value:!0}]},sorters:{initial:[{field:"created_at",order:"desc"}]}}),{show:b,create:_}=ye();x.useEffect(()=>{(async()=>{if(!u?.data)return;const D=u.data.map($=>$.id);try{const{data:$,error:Z}=await I.from("v_trainer_stats").select("*").in("trainer_id",D);if(!Z&&$){const A=$.reduce((U,v)=>(U[v.trainer_id]=v,U),{});h(A)}const{data:g,error:B}=await I.from("user_dance_styles").select(`
            user_id,
            dance_styles!inner (
              name
            )
          `).in("user_id",D).eq("is_teaching",!0);if(!B&&g){const A=g.reduce((U,v)=>{U[v.user_id]||(U[v.user_id]=[]);const q=v.dance_styles?.name;return q&&U[v.user_id].push(q),U},{});h(U=>{const v={...U};return Object.keys(A).forEach(q=>{v[q]||(v[q]={}),v[q].teaching_styles=A[q]}),v})}}catch($){console.error("Error fetching trainer stats:",$)}})()},[u?.data]);const j=N=>{t(N),d(N,a,i)},k=N=>{r(N),d(s,N,i)},p=N=>{n(N),d(s,a,N)},d=(N,D,$)=>{const Z=[];D!=="all"&&Z.push({field:"city",operator:"eq",value:D}),$!=="all"&&Z.push({field:"teaching_styles",operator:"contains",value:$}),N&&Z.push({field:"name",operator:"contains",value:N}),Z.push({field:"is_trainer",operator:"eq",value:!0}),l(Z)},E=Ze({isLoading:c,isError:y});if(E)return E;const H=u?.data||[],G=Array.from(new Set(H.map(N=>N.city).filter(Boolean))),V=N=>"50-150 PLN";return e.jsxs(X,{children:[e.jsx(Q,{children:e.jsx(xe,{title:"Znajdź trenera",description:"Umów się na zajęcia taneczne z najlepszymi instruktorami"})}),e.jsxs(Q,{children:[e.jsxs("div",{className:"relative max-w-md w-full",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(T,{placeholder:"Szukaj trenera...",className:"pl-10",value:s,onChange:N=>j(N.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ne,{value:a,onValueChange:k,children:[e.jsxs(re,{className:"w-[140px]",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),e.jsx(le,{placeholder:"Miasto"})]}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Wszystkie miasta"}),G.map(N=>e.jsx(P,{value:N,children:N},N))]})]}),e.jsxs(ne,{value:i,onValueChange:p,children:[e.jsxs(re,{className:"w-[160px]",children:[e.jsx(Ia,{className:"w-4 h-4 mr-2"}),e.jsx(le,{placeholder:"Styl tańca"})]}),e.jsxs(ie,{children:[e.jsx(P,{value:"all",children:"Wszystkie style"}),e.jsx(P,{value:"Salsa",children:"Salsa"}),e.jsx(P,{value:"Bachata",children:"Bachata"}),e.jsx(P,{value:"Tango",children:"Tango"}),e.jsx(P,{value:"Hip Hop",children:"Hip Hop"})]})]})]}),e.jsxs(L,{variant:"outline",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),u?.total||0," trenerów"]})]}),e.jsx(oe,{variant:"1-2-3",children:H.map(N=>{const D=o[N.id]||{},$=D.teaching_styles||[];return e.jsx(S,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300",children:e.jsxs(M,{className:"p-0",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(Ne,{className:"h-16 w-16 ring-2 ring-offset-2 ring-gray-200",children:[e.jsx(Le,{src:N.profile_photo_url}),e.jsx(ve,{className:"text-xl bg-gradient-to-br from-purple-500 to-pink-500 text-white",children:N.name?.[0]?.toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:N.name}),N.is_verified&&e.jsx(Fe,{className:"w-4 h-4 text-blue-500 flex-shrink-0"})]}),N.city&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),N.city]}),D.average_rating&&D.review_count>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(qs,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-medium",children:D.average_rating.toFixed(1)})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",D.review_count," ",D.review_count===1?"opinia":"opinii",")"]})]})]})]}),N.bio&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-3",children:N.bio}),$.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-3",children:[$.slice(0,3).map((Z,g)=>e.jsx(L,{variant:"secondary",className:"text-xs",children:Z},g)),$.length>3&&e.jsxs(L,{variant:"outline",className:"text-xs",children:["+",$.length-3]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-px bg-gray-200",children:[e.jsxs("div",{className:"bg-gray-50 p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold text-primary",children:D.total_events||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"wydarzeń"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold text-primary",children:D.unique_students||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"uczniów"})]}),e.jsxs("div",{className:"bg-gray-50 p-3 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-primary",children:V()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"cena"})]})]}),e.jsxs("div",{className:"p-4 bg-white border-t",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ge,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Wolne terminy dzisiaj"})]}),e.jsx(cs,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(z,{className:"w-full group",onClick:()=>window.location.href=`/trainers/${N.id}/booking`,children:[e.jsx(Lr,{className:"w-4 h-4 mr-2"}),"Umów zajęcia",e.jsx(cs,{className:"w-4 h-4 ml-auto group-hover:translate-x-1 transition-transform"})]})]})]})},N.id)})}),H.length===0&&e.jsxs(S,{className:"p-12 text-center border-dashed",children:[e.jsx(ce,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nie znaleziono trenerów"}),e.jsx("p",{className:"text-muted-foreground",children:s||a!=="all"||i!=="all"?"Spróbuj zmienić kryteria wyszukiwania":"Brak dostępnych trenerów w tym momencie"})]}),e.jsx(ws,{current:f,pageSize:m,total:u?.total||0,setCurrent:w,itemName:"trenerów"})]})},Kn=()=>{const{trainerId:s}=Pa(),t=pe(),{data:a}=je(),[r,i]=x.useState(null),[n,o]=x.useState([]),[h,u]=x.useState(new Date),[c,y]=x.useState(null),[f,w]=x.useState(ks(new Date,{weekStartsOn:1})),[m,l]=x.useState([]),[b,_]=x.useState(!0),[j,k]=x.useState("calendar");x.useEffect(()=>{if(!s)return;(async()=>{try{const{data:D,error:$}=await I.from("v_trainer_stats").select("*").eq("trainer_id",s).single();if($)throw $;i(D);const{data:Z,error:g}=await I.from("user_dance_styles").select(`
            skill_level,
            dance_styles!inner (
              name
            )
          `).eq("user_id",s).eq("is_teaching",!0);!g&&Z&&o(Z.map(B=>({style_name:B.dance_styles?.name||"",skill_level:B.skill_level})))}catch(D){console.error("Error fetching trainer:",D),K.error("Nie udało się pobrać danych trenera")}})()},[s]),x.useEffect(()=>{if(!s)return;(async()=>{_(!0);const D=Xs(f,{weekStartsOn:1});try{const{data:$,error:Z}=await I.from("events").select("*").eq("organizer_id",s).gte("start_at",f.toISOString()).lte("start_at",D.toISOString()).in("status",["published"]).order("start_at");if(Z)throw Z;const g=[];$&&$.forEach(B=>{const A=new Date(B.start_at),U=te(A,"HH:mm"),v=te(new Date(B.end_at),"HH:mm");g.push({id:B.id,event_id:B.id,date:A,start_time:U,end_time:v,is_available:!1,is_recurring:B.is_recurring,event:{id:B.id,title:B.title,event_type:B.event_type,location_type:B.location_type,price:B.price,participant_count:B.participant_count,max_participants:B.max_participants||999}})}),l(g)}catch($){console.error("Error fetching time slots:",$),K.error("Nie udało się pobrać terminów")}finally{_(!1)}})()},[s,f]);const p=N=>{const D=N==="next"?ts(f,7):ts(f,-7);_s(D,ks(new Date,{weekStartsOn:1}))||w(D)},d=N=>{N.event&&(N.event.participant_count<N.event.max_participants?(y(N),k("confirmation")):K.error("Brak wolnych miejsc"))},E=async()=>{if(!c?.event||!a?.id){K.error("Musisz być zalogowany");return}try{const{error:N}=await I.from("event_participants").insert({event_id:c.event.id,user_id:a.id,status:"registered"});if(N)throw N;K.success("Zarezerwowano termin!",{description:"Otrzymasz potwierdzenie na email"}),k("calendar"),y(null)}catch(N){console.error("Booking error:",N),K.error("Nie udało się zarezerwować terminu")}},H=()=>{const N=[];for(let D=0;D<7;D++)N.push(ts(f,D));return N},G=N=>m.filter(D=>Ss(D.date,N)).sort((D,$)=>D.start_time.localeCompare($.start_time)),V=N=>({lesson:"Lekcja",workshop:"Warsztaty",social:"Potańcówka"})[N]||N;return r?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[e.jsxs(z,{variant:"ghost",size:"sm",onClick:()=>t(-1),className:"mb-4",children:[e.jsx(Es,{className:"w-4 h-4 mr-1"}),"Wróć"]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(Ne,{className:"h-20 w-20",children:[e.jsx(Le,{src:r.profile_photo_url}),e.jsx(ve,{children:r.name?.[0]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:r.name}),r.is_verified&&e.jsxs(L,{variant:"secondary",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Zweryfikowany"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[r.city&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),r.city]}),r.average_rating&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qs,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),r.average_rating.toFixed(1)," (",r.review_count,")"]}),r.total_events&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),r.total_events," wydarzeń"]})]}),n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((N,D)=>e.jsx(L,{variant:"outline",className:"text-xs",children:N.style_name},D))})]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:j==="calendar"?e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(S,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Wybierz termin"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"outline",size:"sm",onClick:()=>p("prev"),disabled:_s(ts(f,-7),ks(new Date,{weekStartsOn:1})),children:e.jsx(Es,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm font-medium px-3",children:[te(f,"d MMM",{locale:ue})," -",te(Xs(f,{weekStartsOn:1}),"d MMM yyyy",{locale:ue})]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>p("next"),children:e.jsx(cs,{className:"w-4 h-4"})})]})]})}),e.jsx(M,{className:"p-0",children:b?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:"min-w-[800px]",children:[e.jsx("div",{className:"grid grid-cols-7 gap-2 p-4 border-b",children:H().map(N=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:te(N,"EEE",{locale:ue})}),e.jsx("div",{className:C("text-lg font-semibold",Ss(N,new Date)&&"text-primary"),children:te(N,"d")})]},N.toISOString()))}),e.jsx("div",{className:"grid grid-cols-7 gap-2 p-4",children:H().map(N=>{const D=G(N),$=_s(N,new Date)&&!Ss(N,new Date);return e.jsx("div",{className:"min-h-[300px]",children:$?e.jsx("div",{className:"text-center text-sm text-muted-foreground py-8",children:"-"}):D.length===0?e.jsx("div",{className:"text-center text-sm text-muted-foreground py-8",children:"Brak zajęć"}):e.jsx("div",{className:"space-y-2",children:D.map(Z=>{if(!Z.event)return null;const g=Z.event.participant_count>=Z.event.max_participants;return e.jsxs("button",{onClick:()=>d(Z),disabled:g,className:C("w-full p-3 rounded-lg text-left transition-all text-xs","hover:scale-105 hover:shadow-md",g?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200"),children:[e.jsxs("div",{className:"font-semibold",children:[Z.start_time," - ",Z.end_time]}),e.jsx("div",{className:"mt-1 line-clamp-2",children:Z.event.title}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("span",{children:[e.jsx(ce,{className:"w-3 h-3 inline mr-1"}),Z.event.participant_count,"/",Z.event.max_participants]}),Z.event.price>0&&e.jsxs("span",{className:"font-semibold",children:[Z.event.price," PLN"]})]})]},Z.id)})})},N.toISOString())})})]})})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(F,{children:e.jsx("h3",{className:"font-semibold",children:"Legenda"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 border border-blue-200 rounded"}),e.jsx("span",{className:"text-sm",children:"Zajęcia grupowe - są miejsca"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 rounded"}),e.jsx("span",{className:"text-sm",children:"Brak wolnych miejsc"})]})]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsx("h3",{className:"font-semibold",children:"Informacje"})}),e.jsxs(M,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(Te,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Kliknij na wolny termin aby zarezerwować zajęcia"]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(ge,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Zajęcia trwają zazwyczaj 60 minut"]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(ce,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Możesz dołączyć do istniejących zajęć grupowych"]})]})]}),r.bio&&e.jsxs(S,{children:[e.jsx(F,{children:e.jsx("h3",{className:"font-semibold",children:"O trenerze"})}),e.jsx(M,{children:e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-4",children:r.bio})})]})]})]}):e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(S,{children:[e.jsx(F,{children:e.jsx("h2",{className:"text-xl font-semibold",children:"Potwierdź rezerwację"})}),e.jsx(M,{className:"space-y-6",children:c?.event&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold",children:c.event.title}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Data i godzina"}),e.jsxs("p",{className:"font-medium",children:[te(c.date,"EEEE, d MMMM yyyy",{locale:ue}),e.jsx("br",{}),c.start_time," - ",c.end_time]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Rodzaj zajęć"}),e.jsx("p",{className:"font-medium",children:V(c.event.event_type)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Lokalizacja"}),e.jsx("p",{className:"font-medium",children:c.event.location_type==="online"?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mr,{className:"w-4 h-4"}),"Online"]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-4 h-4"}),r.city]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Cena"}),e.jsx("p",{className:"font-medium",children:c.event.price>0?`${c.event.price} PLN`:"Bezpłatne"})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800 flex items-start gap-2",children:[e.jsx(Te,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Po potwierdzeniu rezerwacji otrzymasz email z wszystkimi szczegółami oraz informacją o płatności (jeśli dotyczy)."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(z,{variant:"outline",className:"flex-1",onClick:()=>{y(null),k("calendar")},children:[e.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Anuluj"]}),e.jsxs(z,{className:"flex-1",onClick:E,children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Potwierdź rezerwację"]})]})]})})]})})})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})},Jn={name:"trainers",list:"/trainers",meta:{label:"Znajdź trenera"}},Yn=[e.jsx(J,{path:"/trainers",element:e.jsx(Gn,{})},"trainers-list"),e.jsx(J,{path:"/trainers/:trainerId/booking",element:e.jsx(Kn,{})},"trainer-booking")],fe=({children:s})=>e.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"h-96 fixed top-0 w-full -rotate-1 scale-125",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400/0 via-pink-300/15 to-purple-500/10"})}),e.jsx("div",{className:"absolute top-20 -left-32 w-64 h-64 bg-gradient-to-br from-purple-300/20 to-pink-300/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 -right-32 w-96 h-96 bg-gradient-to-tl from-purple-400/15 to-pink-400/15 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-64 bg-gradient-to-b from-pink-200/10 to-transparent"}),e.jsx("div",{className:"w-full max-w-lg space-y-3 relative z-10",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-300/5 to-pink-300/5 rounded-lg blur-md"}),e.jsx("div",{className:"relative bg-background/80 backdrop-blur-sm rounded-lg shadow-xl shadow-purple-200/20 border border-purple-200/20 p-8",children:s})]})})]}),Qn=()=>{const{mutate:s,isLoading:t,error:a,data:r}=dr(),[i,n]=W.useState(""),[o,h]=W.useState(""),[u,c]=W.useState(!1);W.useEffect(()=>{console.log("🔍 useLogin state:",{hookError:a,loginData:r,isLoading:t})},[a,r,t]);const y=W.useCallback(b=>{if(console.log("🔧 Parsing error:",b),!b)return"Wystąpił nieoczekiwany błąd.";if(typeof b=="string")return b;if(b.name==="AuthApiError"||b.constructor?.name==="AuthApiError"){const _=b.message||"";return _.includes("Invalid login credentials")?"Nieprawidłowe dane logowania. Sprawdź email i hasło.":_.includes("Email not confirmed")?"Konto nie zostało potwierdzone. Sprawdź swoją skrzynkę email i kliknij link aktywacyjny.":_.includes("Too many requests")?"Zbyt wiele prób logowania. Spróbuj ponownie za kilka minut.":_.includes("User not found")?"Nie znaleziono użytkownika z tym adresem email.":_||"Błąd uwierzytelniania."}if(b.message){const _=b.message;return _.includes("Invalid login credentials")?"Nieprawidłowe dane logowania. Sprawdź email i hasło.":_.includes("Email not confirmed")?"Konto nie zostało potwierdzone. Sprawdź swoją skrzynkę email.":_}return"Wystąpił błąd logowania. Spróbuj ponownie."},[]),f=W.useMemo(()=>u?a?(console.log("📍 Using hookError"),y(a)):r?.success===!1&&r.error?(console.log("📍 Using loginData.error"),y(r.error)):null:null,[a,r,u,y]),w=W.useMemo(()=>r?.success===!0,[r]);W.useEffect(()=>{w&&(console.log("✅ Login successful, clearing form"),n(""),h(""))},[w]);const m=W.useCallback(()=>{if(console.log("🚀 Login attempt:",{email:i,password:o?"***":""}),!i.trim()||!o.trim()){console.log("❌ Login blocked - empty fields");return}c(!0);const b={email:i.trim(),password:o};s(b,{onSuccess:_=>{console.log("✅ Login onSuccess:",_)},onError:_=>{console.error("❌ Login onError:",_)}})},[i,o,s]),l=W.useCallback(b=>{b.preventDefault(),console.log("📝 Form submitted"),m()},[m]);return{email:i,password:o,setEmail:n,setPassword:h,isLoading:t,error:f,login:m,handleSubmit:l}},Xn=()=>{const[s]=ar(),{email:t,password:a,setEmail:r,setPassword:i,isLoading:n,error:o,handleSubmit:h}=Qn(),u=s.get("verified")==="true",c=s.get("passwordChanged")==="true",y=t.trim().length>0&&a.length>0,f=l=>l.includes("nie zostało potwierdzone")?"warning":"destructive",w=l=>l.includes("nie zostało potwierdzone")?Te:Ye,m=l=>{if(o){if(l==="email"&&o.toLowerCase().includes("email"))return"Sprawdź poprawność adresu email";if(l==="password"&&o.toLowerCase().includes("hasło"))return"Sprawdź poprawność hasła"}};return e.jsx(fe,{children:e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsx(O,{className:"text-2xl text-center",children:"Zaloguj się"}),e.jsx(Pe,{className:"text-center",children:"Wprowadź swoje dane aby się zalogować"})]}),e.jsxs(M,{children:[u&&e.jsxs(ee,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(Ce,{className:"h-4 w-4 text-green-600"}),e.jsxs(se,{className:"text-green-800",children:[e.jsx("strong",{children:"Email potwierdzony!"})," Możesz się teraz zalogować."]})]}),c&&e.jsxs(ee,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(Ce,{className:"h-4 w-4 text-green-600"}),e.jsxs(se,{className:"text-green-800",children:[e.jsx("strong",{children:"Hasło zmienione!"})," Możesz się zalogować używając nowego hasła."]})]}),e.jsxs(fs,{onSubmit:h,children:[e.jsx(Y,{label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Email"]}),htmlFor:"email",error:m("email"),required:!0,children:e.jsx(T,{id:"email",type:"email",placeholder:"przykład@email.com",value:t,onChange:l=>r(l.target.value),disabled:n,className:m("email")?"border-red-500":""})}),e.jsx(Y,{label:e.jsxs("span",{className:"flex items-center",children:[e.jsx(Rr,{className:"mr-2 h-4 w-4"}),"Hasło"]}),htmlFor:"password",error:m("password"),required:!0,children:e.jsx(T,{id:"password",type:"password",placeholder:"Wprowadź hasło",value:a,onChange:l=>i(l.target.value),disabled:n,className:m("password")?"border-red-500":""})}),o&&e.jsxs(ee,{variant:f(o),children:[W.createElement(w(o),{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsx("strong",{children:"Błąd logowania:"})," ",o,o.includes("nie zostało potwierdzone")&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("p",{children:["💡 ",e.jsx("strong",{children:"Co robić:"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Sprawdź swoją skrzynkę email (także spam)"}),e.jsx("li",{children:"Kliknij link aktywacyjny w emailu"}),e.jsxs("li",{children:["Jeśli nie otrzymałeś emaila, możesz"," ",e.jsx(Ge,{to:"/resend-confirmation",className:"underline",children:"wysłać ponownie"})]})]})]}),o.includes("Nieprawidłowe dane")&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsxs("p",{children:["💡 ",e.jsx("strong",{children:"Sprawdź:"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Czy email jest wpisany poprawnie"}),e.jsx("li",{children:"Czy hasło jest poprawne (uwaga na wielkość liter)"}),e.jsx("li",{children:"Czy masz już założone konto"})]})]})]})]}),e.jsx(gs,{className:"!border-0 !pt-0 justify-center",children:e.jsxs(z,{type:"submit",className:"w-full",disabled:n||!y,children:[n&&e.jsx(Ue,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Logowanie...":"Zaloguj się"]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"text-center text-sm",children:e.jsx(Ge,{to:"/register/step1",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"Nie masz konta? Zarejestruj się"})}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(Ge,{to:"/forgot-password",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"Zapomniałeś hasła?"})}),e.jsx("div",{className:"border-t pt-4 mt-4",children:e.jsxs("div",{className:"text-center text-xs text-gray-500",children:[e.jsx("p",{children:"Problemy z logowaniem?"}),e.jsx(Ge,{to:"/contact",className:"text-blue-600 hover:text-blue-500 transition-colors",children:"Skontaktuj się z pomocą techniczną"})]})})]})]})]})})},el=()=>{const{mutate:s,isLoading:t,error:a}=mr(),[r,i]=W.useState(1),[n,o]=W.useState(""),[h,u]=W.useState(""),[c,y]=W.useState(""),[f,w]=W.useState(""),[m,l]=W.useState(""),b=[{value:"beneficiary",label:"Beneficiary",description:"Użytkownik końcowy systemu",icon:we},{value:"auditor",label:"Auditor",description:"Audytor z uprawnieniami kontrolnymi",icon:Qe}],_=d=>{if(d.preventDefault(),l(""),h!==c){l("Hasła nie są identyczne");return}if(h.length<6){l("Hasło musi mieć co najmniej 6 znaków");return}i(2)},j=()=>{if(!f){l("Wybierz rolę");return}s({email:n,password:h,role:f})},k=d=>{w(d),l("")},p=()=>{i(1),l("")};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:r===1?e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsx(O,{className:"text-2xl text-center",children:"Zarejestruj się"}),e.jsx(Pe,{className:"text-center",children:"Krok 1/2: Podaj swoje dane"})]}),e.jsxs(M,{children:[e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"email",children:"Email"}),e.jsx(T,{id:"email",type:"email",placeholder:"przykład@email.com",value:n,onChange:d=>o(d.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"password",children:"Hasło"}),e.jsx(T,{id:"password",type:"password",placeholder:"Minimum 6 znaków",value:h,onChange:d=>u(d.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"confirmPassword",children:"Potwierdź hasło"}),e.jsx(T,{id:"confirmPassword",type:"password",placeholder:"Powtórz hasło",value:c,onChange:d=>y(d.target.value),required:!0})]}),m&&e.jsx(ee,{variant:"destructive",children:e.jsx(se,{children:m})}),e.jsx(z,{type:"submit",className:"w-full",children:"Dalej"})]}),e.jsx("div",{className:"mt-4 text-center text-sm",children:e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500",children:"Masz już konto? Zaloguj się"})})]})]}):e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsx(O,{className:"text-2xl text-center",children:"Wybierz rolę"}),e.jsx(Pe,{className:"text-center",children:"Krok 2/2: Jaka jest Twoja rola w systemie?"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:b.map(d=>{const E=d.icon;return e.jsx("div",{onClick:()=>k(d.value),className:`p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50 ${f===d.value?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:`h-6 w-6 mt-1 ${f===d.value?"text-blue-600":"text-gray-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`font-medium ${f===d.value?"text-blue-900":"text-gray-900"}`,children:d.label}),e.jsx("p",{className:`text-sm ${f===d.value?"text-blue-700":"text-gray-500"}`,children:d.description})]})]})},d.value)})}),m&&e.jsx(ee,{variant:"destructive",children:e.jsx(se,{children:m})}),a&&e.jsx(ee,{variant:"destructive",children:e.jsx(se,{children:a?.message||"Błąd rejestracji"})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(z,{variant:"outline",onClick:p,className:"flex-1",disabled:t,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Wstecz"]}),e.jsxs(z,{onClick:j,className:"flex-1",disabled:t||!f,children:[t&&e.jsx(Ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Zarejestruj się"]})]})]})]})})})},sl=()=>{const{mutate:s,isLoading:t,error:a,isSuccess:r}=xr(),[i,n]=W.useState(""),o=h=>{h.preventDefault(),s({email:i})};return r?e.jsx(fe,{children:e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsxs(O,{className:"text-2xl text-center flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"h-6 w-6 text-green-500"}),"Email wysłany"]}),e.jsx(Pe,{className:"text-center",children:"Sprawdź swoją skrzynkę odbiorczą"})]}),e.jsxs(M,{children:[e.jsx(ee,{children:e.jsxs(se,{children:["Wysłaliśmy link do resetowania hasła na adres ",e.jsx("strong",{children:i}),". Sprawdź swoją skrzynkę odbiorczą i kliknij w link, aby zresetować hasło."]})}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500",children:"Powrót do logowania"})})]})]})}):e.jsx(fe,{children:e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsx(O,{className:"text-2xl text-center",children:"Resetuj hasło"}),e.jsx(Pe,{className:"text-center",children:"Wprowadź swój email, aby otrzymać link do resetowania hasła"})]}),e.jsxs(M,{children:[e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"email",children:"Email"}),e.jsx(T,{id:"email",type:"email",placeholder:"przykład@email.com",value:i,onChange:h=>n(h.target.value),required:!0})]}),a&&e.jsx(ee,{variant:"destructive",children:e.jsx(se,{children:a.message||"Błąd podczas wysyłania emaila"})}),e.jsxs(z,{type:"submit",className:"w-full",disabled:t,children:[t&&e.jsx(Ue,{className:"mr-2 h-4 w-4 animate-spin"}),"Wyślij link resetujący"]})]}),e.jsx("div",{className:"mt-4 text-center text-sm",children:e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500",children:"Powrót do logowania"})})]})]})})},al=()=>{const s=pe(),{mutate:t,isLoading:a,error:r}=ur(),[i,n]=W.useState(""),[o,h]=W.useState(""),[u,c]=W.useState(""),[y,f]=W.useState(!0),[w,m]=W.useState(!0),[l,b]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const{data:k}=await I.auth.getSession(),d=new URLSearchParams(window.location.hash.substring(1)).get("type");!k.session&&d!=="recovery"?(console.log("No valid recovery session found"),f(!1),setTimeout(()=>{s("/forgot-password")},3e3)):(console.log("Valid session found"),f(!0))}catch(k){console.error("Session check error:",k),f(!1)}finally{m(!1)}})()},[s]);const _=async j=>{if(j.preventDefault(),c(""),i!==o){c("Hasła nie są identyczne");return}if(i.length<6){c("Hasło musi mieć co najmniej 6 znaków");return}if(i.length>72){c("Hasło nie może być dłuższe niż 72 znaki");return}t({password:i},{onSuccess:()=>{b(!0),setTimeout(()=>{s("/login?passwordChanged=true")},3e3)},onError:k=>{console.error("Password update error:",k),c(k?.message||"Błąd aktualizacji hasła")}})};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),e.jsx("p",{className:"text-gray-600",children:"Weryfikacja sesji..."})]})}):y?l?e.jsx(fe,{children:e.jsxs(S,{className:"border-green-200",children:[e.jsx(F,{children:e.jsxs(O,{className:"text-2xl text-center flex items-center justify-center gap-2",children:[e.jsx(Ce,{className:"h-6 w-6 text-green-600"}),"Hasło zmienione!"]})}),e.jsx(M,{children:e.jsxs(ee,{className:"border-green-200 bg-green-50",children:[e.jsx(Ce,{className:"h-4 w-4 text-green-600"}),e.jsx(se,{className:"text-green-800",children:"Twoje hasło zostało pomyślnie zmienione. Za chwilę zostaniesz przekierowany do strony logowania..."})]})})]})}):e.jsx(fe,{children:e.jsxs(S,{children:[e.jsxs(F,{className:"space-y-1",children:[e.jsxs(O,{className:"text-2xl text-center flex items-center justify-center gap-2",children:[e.jsx(Ar,{className:"h-6 w-6"}),"Nowe hasło"]}),e.jsx(Pe,{className:"text-center",children:"Wprowadź nowe hasło dla swojego konta"})]}),e.jsxs(M,{children:[e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"password",children:"Nowe hasło"}),e.jsx(T,{id:"password",type:"password",placeholder:"Minimum 6 znaków",value:i,onChange:j=>n(j.target.value),disabled:a,required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"confirmPassword",children:"Potwierdź nowe hasło"}),e.jsx(T,{id:"confirmPassword",type:"password",placeholder:"Powtórz nowe hasło",value:o,onChange:j=>h(j.target.value),disabled:a,required:!0})]}),e.jsxs(ee,{children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsx("strong",{children:"Wymagania hasła:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm",children:[e.jsx("li",{children:"Minimum 6 znaków"}),e.jsx("li",{children:"Maksimum 72 znaki"}),e.jsx("li",{children:"Zalecane użycie liter, cyfr i znaków specjalnych"})]})]})]}),(r||u)&&e.jsxs(ee,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(se,{children:u||r?.message||"Błąd aktualizacji hasła"})]}),e.jsxs(z,{type:"submit",className:"w-full",disabled:a,children:[a&&e.jsx(Ue,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Aktualizowanie...":"Zaktualizuj hasło"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Pamiętasz hasło?"," ",e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500",children:"Wróć do logowania"})]})})]})]})}):e.jsx(fe,{children:e.jsx(S,{className:"border-red-200",children:e.jsx(M,{className:"pt-6",children:e.jsxs(ee,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsx("strong",{children:"Nieprawidłowa lub wygasła sesja."}),e.jsx("br",{}),"Link do resetowania hasła mógł wygasnąć. Za chwilę zostaniesz przekierowany do strony resetowania hasła..."]})]})})})})},kt=({schemaPath:s,onSubmit:t,submitLabel:a="Dalej",className:r=""})=>{const{getSchemaFragment:i,setData:n,getData:o}=Xe(),[h]=s.split("."),[u,c]=W.useState(""),[y,f]=W.useState({}),w=i(s),m=o(h);if(!w)return e.jsx(ee,{variant:"destructive",children:e.jsxs(se,{children:["Nie znaleziono schematu dla ścieżki: ",s]})});const l=j=>{j.preventDefault(),c(""),f({});const k={};if(w.required)for(const p of w.required)m[p]||(k[p]="To pole jest wymagane");if(Object.keys(k).length>0){f(k);return}if(w.validation){const p=w.validation(m);if(p){c(p);return}}t(m)},b=(j,k)=>{n(h,{...m,[j]:k}),y[j]&&f(p=>{const d={...p};return delete d[j],d})},_=(j,k)=>{const p=m[j]||"",d=w.required?.includes(j),E=y[j];switch(k.type){case"text":case"email":case"password":return e.jsx(Y,{label:k.title||j,htmlFor:j,error:E,required:d,children:e.jsx(T,{id:j,type:k.type,value:p,placeholder:k.placeholder,onChange:H=>b(j,H.target.value),className:E?"border-red-500":""})},j);case"select":return e.jsx(Y,{label:k.title||j,htmlFor:j,error:E,required:d,children:e.jsxs(ne,{value:p,onValueChange:H=>b(j,H),children:[e.jsx(re,{className:E?"border-red-500":"",children:e.jsx(le,{placeholder:k.placeholder||"Wybierz opcję"})}),e.jsx(ie,{children:k.options?.map(H=>e.jsx(P,{value:H.value,children:H.label},H.value))})]})},j);default:return null}};return e.jsxs(S,{className:r,children:[e.jsx(F,{children:e.jsx(O,{children:w.title})}),e.jsx(M,{children:e.jsxs(fs,{onSubmit:l,children:[e.jsxs(oe,{variant:"1-1-1",children:[w.properties&&Object.entries(w.properties).map(([j,k])=>_(j,k)),u&&e.jsx(ee,{variant:"destructive",className:"mt-4",children:e.jsx(se,{children:u})})]}),e.jsx(gs,{className:"mt-6 pt-6",children:e.jsx(z,{type:"submit",className:"w-full sm:w-auto",children:a})})]})})]})},tl=()=>{const s=pe(),{register:t}=Xe();x.useEffect(()=>{t({id:"registration",title:"Proces rejestracji",schema:{step1:{title:"Dane podstawowe",type:"object",properties:{email:{type:"email",title:"Email",placeholder:"przykład@email.com"},role:{type:"select",title:"Wybierz rolę",placeholder:"Wybierz swoją rolę",options:[{value:"beneficiary",label:"Beneficjent - zakładający zlecenie"},{value:"auditor",label:"Auditor - opiniujący zlecenie"},{value:"contractor",label:"Wykonawca - realizujący zlecenie"}]}},required:["email","role"]},step2:{title:"Hasło",type:"object",properties:{password:{type:"password",title:"Hasło",placeholder:"Minimum 6 znaków"},confirmPassword:{type:"password",title:"Potwierdź hasło",placeholder:"Powtórz hasło"}},required:["password","confirmPassword"],validation:r=>r.password&&r.password.length<6?"Hasło musi mieć co najmniej 6 znaków":r.password!==r.confirmPassword?"Hasła nie są identyczne":null},step3:{title:"Podsumowanie",type:"object",properties:{}}}})},[t]);const a=r=>{console.log("RegisterStep1 - Otrzymane dane z formularza:",r),s("/register/step2")};return e.jsxs(fe,{children:[e.jsxs("div",{className:"flex items-start gap-5 ",children:[e.jsx(Ke,{className:"mt-2 bg-white rounded-full p-2 w-12 h-12"}),e.jsx(xe,{title:"Rejestracja",description:"1 z 3 Podaj podstawowe informacje"})]}),e.jsx(kt,{schemaPath:"registration.step1",onSubmit:a,submitLabel:"Dalej"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(Ge,{to:"/login",className:"text-blue-600 hover:text-blue-500 text-sm",children:"Masz już konto? Zaloguj się"})})]})},rl=()=>{const s=pe(),{setData:t}=Xe(),a=i=>{t("registration",i),s("/register/step3")},r=()=>{s("/register/step1")};return e.jsxs(fe,{children:[e.jsxs("div",{className:"flex items-start gap-5 ",children:[e.jsx(Ir,{className:"mt-2 bg-white rounded-full p-2 w-12 h-12"}),e.jsx(xe,{title:"Rejestracja",description:"2 z 3 Ustaw hasło do konta"})]}),e.jsx(kt,{schemaPath:"registration.step2",onSubmit:a,submitLabel:"Dalej"}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(z,{variant:"outline",onClick:r,className:"flex items-center",children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Wstecz"]}),e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500 text-sm",children:"Masz już konto? Zaloguj się"})]})]})},il=()=>{const s=pe(),{getData:t,setData:a}=Xe(),[r,i]=W.useState(!1),[n,o]=W.useState(!1),[h,u]=W.useState(null),c=t("registration"),y=W.useCallback(async()=>{if(!Rs.register){u("Funkcja rejestracji nie jest dostępna");return}i(!0),u(null);try{const w=await Rs.register({email:c.email,password:c.password,role:c.role,...c.operator_id&&{operator_id:c.operator_id}});console.log("Registration result:",w),w.success?(o(!0),a("registration",{...c,registrationComplete:!0,registrationDate:new Date().toISOString(),user:w.user}),setTimeout(()=>{s("/register/step4")},1500)):u(w.error?.message||"Rejestracja nie powiodła się")}catch(w){console.error("Registration error:",w),u("Wystąpił nieoczekiwany błąd")}finally{i(!1)}},[c,a,s]),f=W.useCallback(()=>{s("/register/step2")},[s]);return{isLoading:r,isSuccess:n,error:h,register:y,goBack:f,processData:c}},nl=()=>{const s=pe(),{isLoading:t,isSuccess:a,error:r,register:i,goBack:n,processData:o}=il(),h=c=>c==="auditor"?Qe:we,u=c=>c==="auditor"?"Auditor":c==="beneficiary"?"Beneficjent":c==="contractor"?"Wykonawca":"Nieznana rola";return!o||!o.email?e.jsxs(e.Fragment,{children:[e.jsx(xe,{title:"Rejestracja",description:"Błąd - brak danych"}),e.jsxs(ee,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(se,{children:"Brak danych rejestracji. Rozpocznij proces od początku."})]}),e.jsx(z,{onClick:()=>s("/register/step1"),className:"mt-4",children:"Wróć do kroku 1"})]}):e.jsxs(fe,{children:[e.jsxs("div",{className:"flex items-start gap-5 ",children:[e.jsx(Fr,{className:"mt-2 bg-white rounded-full p-2 w-12 h-12"}),e.jsx(xe,{title:"Rejestracja",description:"3 z 4 Potwierdzenie danych"})]}),a&&e.jsxs(ee,{className:"mb-4 border-green-200 bg-green-50",children:[e.jsx(ls,{className:"h-4 w-4 text-green-600"}),e.jsxs(se,{className:"text-green-800",children:[e.jsx("strong",{children:"Rejestracja udana!"})," Za chwilę zostaniesz przekierowany..."]})]}),r&&!a&&e.jsxs(ee,{variant:"destructive",className:"mb-4",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsx("strong",{children:"Rejestracja nieudana:"})," ",r]})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center",children:[e.jsx(ls,{className:"mr-2 h-5 w-5 text-blue-600"}),"Podsumowanie"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Co się stanie:"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Konto zostanie utworzone"}),e.jsx("li",{children:"• Otrzymasz email z potwierdzeniem"}),e.jsx("li",{children:"• Po aktywacji będziesz mógł się zalogować"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:o.email})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[W.createElement(h(o.role),{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rola"}),e.jsx("p",{className:"text-sm text-gray-600",children:u(o.role)})]})]})]}),r&&!a&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Wskazówki w przypadku problemów:"}),e.jsxs("ul",{className:"text-sm text-red-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Sprawdź czy email ma prawidłowy format"}),e.jsx("li",{children:"• Upewnij się że hasło spełnia wymagania (6-72 znaków)"}),e.jsx("li",{children:"• Jeśli masz już konto, przejdź do logowania"}),e.jsx("li",{children:"• W przypadku dalszych problemów skontaktuj się z pomocą"})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsxs(z,{variant:"outline",onClick:n,disabled:t||a,children:[e.jsx(Ee,{className:"mr-2 h-4 w-4"}),"Wstecz"]}),e.jsxs(z,{onClick:i,disabled:t||a,children:[t&&e.jsx(Ue,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Rejestruję...":a?"Udane!":r?"Spróbuj ponownie":"Zarejestruj się"]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-500 text-sm",children:"Masz już konto? Zaloguj się"})})]})},ll=()=>{const s=pe(),{getData:t,unregister:a}=Xe(),[r,i]=W.useState(!1),[n,o]=W.useState(!1),h=t("registration"),u=h?.email||"user@example.com",c=h?.role||"beneficiary";W.useEffect(()=>{const l=setTimeout(()=>{a("registration","data")},3e4);return()=>clearTimeout(l)},[a]);const y=async()=>{i(!0);try{await new Promise(l=>setTimeout(l,2e3)),o(!0),setTimeout(()=>o(!1),3e3)}catch(l){console.error("Błąd wysyłania maila:",l)}finally{i(!1)}},f=()=>{a("registration","data"),s("/login")},w=l=>l==="auditor"?Qe:we,m=l=>l==="auditor"?"Auditor - Audytor systemu":"Beneficiary - Użytkownik końcowy";return e.jsxs(fe,{children:[e.jsx(xe,{title:"Rejestracja zakończona!",description:"4 z 4 Sprawdź swoją skrzynkę mailową"}),e.jsxs(S,{className:"border-green-200 bg-green-50",children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center text-green-800",children:[e.jsx(Ce,{className:"mr-2 h-6 w-6 text-green-600"}),"Konto zostało utworzone!"]})}),e.jsx(M,{className:"space-y-4",children:e.jsxs("div",{className:"text-green-700",children:[e.jsx("p",{className:"font-medium",children:"Gratulacje! Twoje konto zostało pomyślnie utworzone."}),e.jsxs("p",{className:"text-sm mt-1",children:["Wysłaliśmy email z potwierdzeniem na adres ",e.jsx("strong",{children:u})]})]})})]}),e.jsxs(S,{children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center",children:[e.jsx(we,{className:"mr-2 h-5 w-5"}),"Podsumowanie konta"]})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(qe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Adres email"}),e.jsx("p",{className:"text-sm text-gray-600",children:u})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[W.createElement(w(c),{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rola w systemie"}),e.jsx("p",{className:"text-sm text-gray-600",children:m(c)})]})]})]})]}),e.jsxs(S,{className:"border-blue-200",children:[e.jsx(F,{children:e.jsxs(O,{className:"flex items-center text-blue-800",children:[e.jsx(qe,{className:"mr-2 h-5 w-5 text-blue-600"}),"Co dalej?"]})}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Sprawdź swoją skrzynkę mailową"}),e.jsxs("p",{className:"text-gray-600",children:["Email potwierdzający został wysłany na adres ",e.jsx("strong",{children:u})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Kliknij link w emailu"}),e.jsx("p",{className:"text-gray-600",children:"Aktywuj swoje konto klikając w link potwierdzający"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-800 rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Zaloguj się do systemu"}),e.jsx("p",{className:"text-gray-600",children:"Po aktywacji możesz się zalogować używając swojego emailu i hasła"})]})]})]}),e.jsxs(ee,{children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsxs(se,{children:[e.jsx("strong",{children:"Ważne:"})," Email może dotrzeć w ciągu kilku minut. Sprawdź także folder SPAM/Niechciane."]})]})]})]}),e.jsx(S,{children:e.jsx(M,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nie otrzymałeś emaila?"}),n&&e.jsxs(ee,{className:"border-green-200 bg-green-50",children:[e.jsx(Ce,{className:"h-4 w-4 text-green-600"}),e.jsx(se,{className:"text-green-800",children:"Email został wysłany ponownie!"})]}),e.jsxs(z,{variant:"outline",onClick:y,disabled:r,className:"w-full sm:w-auto",children:[r&&e.jsx(Tr,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Wysyłanie...":"Wyślij email ponownie"]})]})})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs(z,{onClick:f,className:"w-full",size:"lg",children:["Przejdź do logowania",e.jsx(ds,{className:"ml-2 h-4 w-4"})]}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"/help",className:"text-blue-600 hover:text-blue-500 text-sm",children:"Potrzebujesz pomocy? Skontaktuj się z nami"})})]})]})},ol=[e.jsx(J,{path:"/login",element:e.jsx(Xn,{})},"auth-login"),e.jsx(J,{path:"/register",element:e.jsx(el,{})},"auth-register"),e.jsx(J,{path:"/forgot-password",element:e.jsx(sl,{})},"auth-forgot-password"),e.jsx(J,{path:"/update-password",element:e.jsx(al,{})},"auth-update-password"),e.jsx(J,{path:"/register/step1",element:e.jsx(tl,{})},"auth-register-1"),e.jsx(J,{path:"/register/step2",element:e.jsx(rl,{})},"auth-register-2"),e.jsx(J,{path:"/register/step3",element:e.jsx(nl,{})},"auth-register-3"),e.jsx(J,{path:"/register/step4",element:e.jsx(ll,{})},"auth-register-4")],cl=()=>{const[s,t]=x.useState(0),[a,r]=x.useState(""),i=pe();x.useEffect(()=>{const u=()=>t(window.scrollY);return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const n=[{icon:ms,title:"ANALIZA STRONY",desc:"AI skanuje i rozumie Twoją stronę, identyfikując kluczowe elementy i USP",features:["Analiza treści","Wykrywanie CTA","Optymalizacja SEO"],color:"from-blue-500/20 to-blue-600/10"},{icon:Or,title:"MULTI-CHANNEL",desc:"Automatyczne kampanie na wszystkich głównych platformach",features:["Google Ads","Meta Ads","LinkedIn"],color:"from-purple-500/20 to-purple-600/10"},{icon:$a,title:"OPTYMALIZACJA",desc:"Machine learning dostosowuje strategię w czasie rzeczywistym",features:["A/B testing","Bid management","Audience targeting"],color:"from-green-500/20 to-green-600/10"}],o=[{day:"Pon",value:40,conversions:245},{day:"Wto",value:65,conversions:398},{day:"Śro",value:55,conversions:332},{day:"Czw",value:75,conversions:456},{day:"Pią",value:85,conversions:512},{day:"Sob",value:95,conversions:578},{day:"Nie",value:88,conversions:526}],h=({active:u,payload:c,label:y})=>u&&c&&c.length?e.jsxs("div",{className:"bg-background border rounded-lg shadow-lg p-3",children:[e.jsx("p",{className:"font-medium",children:y}),e.jsxs("p",{className:"text-sm text-primary",children:["Konwersje: ",c[0].payload.conversions]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Skuteczność: ",c[0].value,"%"]})]}):null;return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx("nav",{className:"fixed top-0 w-full z-50 bg-background/80 backdrop-blur-lg border-b",children:e.jsxs("div",{className:"container mx-auto px-6 py-5 flex justify-between items-center",children:[e.jsxs("div",{className:"text-2xl font-black tracking-tighter",children:["WISEADS",e.jsx("span",{className:"text-primary",children:"."})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[e.jsx(z,{variant:"ghost",className:"text-sm font-medium",children:"Funkcje"}),e.jsx(z,{variant:"ghost",className:"text-sm font-medium",children:"Proces"}),e.jsx(z,{variant:"ghost",className:"text-sm font-medium",children:"Cennik"}),e.jsxs(z,{variant:"default",size:"sm",onClick:()=>i("/login"),children:["Rozpocznij ",e.jsx(ds,{className:"ml-2 h-4 w-4"})]})]})]})}),e.jsxs("section",{className:"relative min-h-screen flex items-center pt-20",children:[e.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:`linear-gradient(to right, currentColor .25px, transparent 1px),
                              linear-gradient(to bottom, currentColor .25px, transparent 1px)`,backgroundSize:"4rem 4rem"}}),e.jsx("div",{className:"container mx-auto px-6 z-20",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"mb-8",variant:"secondary",children:[e.jsx(Se,{className:"mr-2 h-3 w-3"}),"Powered by AI"]}),e.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-black tracking-tighter leading-none mb-8",children:["AUTOMATYCZNE",e.jsx("br",{}),e.jsx("span",{className:"text-primary",children:"KAMPANIE"}),e.jsx("br",{}),"MARKETINGOWE"]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-10 max-w-xl",children:"Wprowadź adres URL, a nasza platforma automatycznie przygotuje, uruchomi i będzie monitorować Twoją kampanię marketingową."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-10",children:[e.jsx(T,{type:"url",placeholder:"https://twoja-strona.pl",value:a,onChange:u=>r(u.target.value),className:"flex-1 h-14 px-5 text-base"}),e.jsxs(z,{size:"lg",className:"h-14 px-8 font-bold text-base",children:["Analizuj stronę ",e.jsx(ds,{className:"ml-2"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-8 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx("span",{children:"RODO Ready"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"h-4 w-4"}),e.jsx("span",{children:"3 min setup"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),e.jsx("span",{children:"97% skuteczność"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-primary/5 blur-3xl rounded-3xl",style:{transform:`translateY(${s*.1}px)`}}),e.jsx(S,{className:"relative border shadow-2xl",children:e.jsxs(M,{className:"p-0",children:[e.jsx("div",{className:"border-b px-6 py-4 bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"dashboard.wiseads.pl"})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Przegląd kampanii"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"2,847"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Konwersje"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"+34%"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"ROI"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:"89k"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Wyświetlenia"})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-4 text-muted-foreground",children:"Skuteczność kampanii (%)"}),e.jsx(Br,{width:"100%",height:200,children:e.jsxs(Ur,{data:o,children:[e.jsx(Zr,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Hr,{dataKey:"day",tick:{fontSize:12},tickLine:!1}),e.jsx(Vr,{tick:{fontSize:12},tickLine:!1,axisLine:!1}),e.jsx(Gr,{content:e.jsx(h,{}),cursor:{fill:"transparent"}}),e.jsx(Kr,{dataKey:"value",fill:"hsl(var(--primary))",radius:[8,8,0,0]})]})})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Google Ads"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Aktywna"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium",children:"Meta Ads"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Aktywna"})]})]})]})]})})]})]})})]}),e.jsx("section",{className:"py-32 bg-muted/20",children:e.jsxs("div",{className:"container mx-auto px-6",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsxs(L,{className:"mb-6",variant:"outline",children:[e.jsx(Se,{className:"mr-2 h-3 w-3"}),"AI-Powered Solutions"]}),e.jsxs("h2",{className:"text-4xl md:text-5xl font-black tracking-tight mb-6",children:["ARCHITEKTURA ",e.jsx("span",{className:"text-primary",children:"SUKCESU"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Trzy filary, które napędzają Twój sukces marketingowy"})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:n.map((u,c)=>e.jsxs(S,{className:"relative overflow-hidden border hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${u.color} opacity-30`}),e.jsxs(M,{className:"relative p-8",children:[e.jsx(u.icon,{className:"w-12 h-12 text-primary mb-6"}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:u.title}),e.jsx("p",{className:"text-muted-foreground mb-6",children:u.desc}),e.jsx("div",{className:"space-y-3",children:u.features.map((y,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm",children:y})]},f))})]})]},c))})]})}),e.jsx("section",{className:"py-32",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-black tracking-tight mb-20",children:["PROCES ",e.jsx("span",{className:"text-primary",children:"KREACJI"})]}),e.jsx("div",{className:"space-y-16",children:[{num:"01",title:"WPROWADŹ URL",desc:"Podaj adres swojej strony internetowej. Nasza AI przeanalizuje całą zawartość."},{num:"02",title:"ANALIZA AI",desc:"Sztuczna inteligencja skanuje treść, identyfikuje USP i określa grupę docelową."},{num:"03",title:"GENEROWANIE",desc:"Automatyczne tworzenie kampanii na Google Ads, Meta i LinkedIn."},{num:"04",title:"MONITORING",desc:"Śledzenie wyników i optymalizacja w czasie rzeczywistym dla maksymalnego ROI."}].map((u,c)=>e.jsxs("div",{className:"flex gap-8 items-start",children:[e.jsx("div",{className:"text-6xl font-black text-muted-foreground/20 w-24 flex-shrink-0",children:u.num}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold mb-3",children:u.title}),e.jsx("p",{className:"text-lg text-muted-foreground",children:u.desc})]})]},c))})]})})}),e.jsx("section",{className:"py-32 bg-muted/20",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:Qs,value:"97%",label:"SKUTECZNOŚĆ KAMPANII",desc:"Średnia skuteczność naszych kampanii"},{icon:ge,value:"24/7",label:"MONITORING REAL-TIME",desc:"Nieprzerwane śledzenie i optymalizacja"},{icon:Ys,value:"3MIN",label:"CZAS DO STARTU",desc:"Od URL do działającej kampanii"}].map((u,c)=>e.jsx(S,{className:"text-center border-0 shadow-sm",children:e.jsxs(M,{className:"p-8",children:[e.jsx(u.icon,{className:"w-10 h-10 text-primary mx-auto mb-6"}),e.jsx("div",{className:"text-4xl font-black text-primary mb-2",children:u.value}),e.jsx("div",{className:"text-sm font-semibold uppercase tracking-wider mb-2",children:u.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.desc})]})},c))})})}),e.jsx("section",{className:"py-32",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsx(S,{className:"max-w-4xl mx-auto shadow-xl",children:e.jsxs(M,{className:"p-12 md:p-16 text-center",children:[e.jsxs("h2",{className:"text-3xl md:text-5xl font-black mb-6",children:["ZACZNIJ ",e.jsx("span",{className:"text-primary",children:"TERAZ"})]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-10 max-w-2xl mx-auto",children:"Dołącz do 1000+ firm, które zautomatyzowały swój marketing"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(z,{size:"lg",className:"px-8 py-6 text-lg",onClick:()=>i("/campaign"),children:"Wypróbuj za darmo"}),e.jsx(z,{onClick:()=>i("/campaign"),size:"lg",variant:"outline",className:"px-8 py-6 text-lg",children:"Zobacz demo"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bez karty kredytowej • 14 dni trial • Anuluj w każdej chwili"})]})})})}),e.jsx("footer",{className:"border-t",children:e.jsx("div",{className:"container mx-auto px-6 py-12",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-2xl font-black tracking-tighter",children:["WISEADS",e.jsx("span",{className:"text-primary",children:"."})]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"© 2025 Wszystkie prawa zastrzeżone"})]})})})]})};function dl(){return e.jsx(tr,{children:e.jsxs(hr,{dataProvider:vr(I),liveProvider:Nr(I),authProvider:Rs,routerProvider:pr,resources:[Bi,Hn,Jn,Li,Oi,Ii],options:{syncWithLocation:!0,warnWhenUnsavedChanges:!0,useNewQueryKeys:!0,liveMode:"auto"},children:[e.jsxs(rr,{children:[e.jsx(J,{path:"/",element:e.jsx(cl,{})}),...ol,e.jsxs(J,{element:e.jsx(Gs,{fallback:e.jsx(fr,{to:"/login"}),children:e.jsx(_i,{children:e.jsx(ir,{})})},"protected-layout"),children:[e.jsx(J,{path:"/profiles",element:e.jsx(Ns,{to:"/profiles/show",replace:!0})}),...Mi,...Fi,...Wi,...Ui,...Vn,...Yn,"  ",e.jsx(J,{path:"*",element:e.jsx(jr,{})})]}),e.jsx(J,{path:"*",element:e.jsx(Gs,{fallback:e.jsx(Ns,{to:"/login",replace:!0}),children:e.jsx(Ns,{to:"/profiles",replace:!0})},"catch-all")})]}),e.jsx(gr,{}),e.jsx(wr,{})]})})}const ml=document.getElementById("root"),xl=Yr.createRoot(ml);xl.render(e.jsx(W.StrictMode,{children:e.jsx(dl,{})}));
